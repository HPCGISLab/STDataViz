<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.5: http://docutils.sourceforge.net/" />
<title>Writing a graphical application for scientific programming using TraitsUI</title>
<meta name="author" content="Gaël Varoquaux" />
<meta name="date" content="2008-10-27" />
<style type="text/css">

/*
:Author: David Goodger
:Contact: goodger@python.org
:Date: $Date: 2006-05-21 22:44:42 +0200 (Sun, 21 May 2006) $
:Revision: $Revision: 4564 $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin-left: 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left {
  clear: left }

img.align-right {
  clear: right }

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font-family: serif ;
  font-size: 100% }

pre.literal-block, pre.doctest-block {
  margin-left: 2em ;
  margin-right: 2em }

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

ul.auto-toc {
  list-style-type: none }

/* Python syntax highlighting */
.pysrc {
    font-weight: normal;
    background-color: #eef2f7;
    background-position:  right;
    background-repeat: repeat-y;
    border: 1px solid;
    border-color: #999999;
    margin: 20px;
    padding:10px 10px 10px 20px;
    font-size: smaller;
    white-space: pre ;
}

.pykeyword {
    font-weight: bold;
    color: #262668 ;
}
.pycomment { color: #007600; }
.pystring { color: #0000bb; }
.pynumber { color:purple; }
.pyoperator { color:purple; font-weight: bold; }
.pytext { color:black; }
.pyerror { font-weight: bold; color: red; }


</style>
</head>
<body>
<div class="header">
Compiled with pyreport
<hr class="header"/>
</div>
<div class="document" id="writing-a-graphical-application-for-scientific-programming-using-traitsui">
<h1 class="title">Writing a graphical application for scientific programming using TraitsUI</h1>
<h2 class="subtitle" id="a-step-by-step-guide-for-a-non-programmer">A step by step guide for a non-programmer</h2>
<table class="docinfo" frame="void" rules="none">
<col class="docinfo-name" />
<col class="docinfo-content" />
<tbody valign="top">
<tr><th class="docinfo-name">Author:</th>
<td>Gaël Varoquaux</td></tr>
<tr><th class="docinfo-name">Date:</th>
<td>2008-10-27</td></tr>
<tr class="field"><th class="docinfo-name">License:</th><td class="field-body">Creative Commons (CC-by-SA 3.0)</td>
</tr>
</tbody>
</table>
<div class="contents topic">
<p class="topic-title first"><a id="tables-of-contents" name="tables-of-contents">Tables of contents</a></p>
<ul class="auto-toc simple">
<li><a class="reference" href="#from-objects-to-dialogs-using-traitsui" id="id17" name="id17">1&nbsp;&nbsp;&nbsp;From objects to dialogs using traitsUI</a><ul class="auto-toc">
<li><a class="reference" href="#object-oriented-programming" id="id18" name="id18">1.1&nbsp;&nbsp;&nbsp;Object-oriented programming</a><ul class="auto-toc">
<li><a class="reference" href="#objects-attributes-and-methods" id="id19" name="id19">1.1.1&nbsp;&nbsp;&nbsp;Objects, attributes and methods</a></li>
<li><a class="reference" href="#classes-and-inheritance" id="id20" name="id20">1.1.2&nbsp;&nbsp;&nbsp;Classes and inheritance</a></li>
</ul>
</li>
<li><a class="reference" href="#an-object-and-its-representation" id="id21" name="id21">1.2&nbsp;&nbsp;&nbsp;An object and its representation</a></li>
<li><a class="reference" href="#displaying-several-objects-in-the-same-panel" id="id22" name="id22">1.3&nbsp;&nbsp;&nbsp;Displaying several objects in the same panel</a></li>
<li><a class="reference" href="#writing-a-graphical-script" id="id23" name="id23">1.4&nbsp;&nbsp;&nbsp;Writing a &quot;graphical script&quot;</a></li>
</ul>
</li>
<li><a class="reference" href="#from-graphical-to-interactive" id="id24" name="id24">2&nbsp;&nbsp;&nbsp;From graphical to interactive</a><ul class="auto-toc">
<li><a class="reference" href="#object-oriented-guis-and-event-loops" id="id25" name="id25">2.1&nbsp;&nbsp;&nbsp;Object-oriented GUIs and event loops</a></li>
<li><a class="reference" href="#reactive-programming" id="id26" name="id26">2.2&nbsp;&nbsp;&nbsp;Reactive programming</a></li>
</ul>
</li>
<li><a class="reference" href="#breaking-the-flow-in-multiple-threads" id="id27" name="id27">3&nbsp;&nbsp;&nbsp;Breaking the flow in multiple threads</a><ul class="auto-toc">
<li><a class="reference" href="#what-are-threads" id="id28" name="id28">3.1&nbsp;&nbsp;&nbsp;What are threads ?</a></li>
<li><a class="reference" href="#threads-in-python" id="id29" name="id29">3.2&nbsp;&nbsp;&nbsp;Threads in python</a></li>
<li><a class="reference" href="#getting-threads-and-the-gui-event-loop-to-play-nice" id="id30" name="id30">3.3&nbsp;&nbsp;&nbsp;Getting threads and the GUI event loop to play nice</a></li>
</ul>
</li>
<li><a class="reference" href="#extending-traitsui-adding-a-matplotlib-figure-to-our-application" id="id31" name="id31">4&nbsp;&nbsp;&nbsp;Extending TraitsUI: Adding a matplotlib figure to our application</a><ul class="auto-toc">
<li><a class="reference" href="#making-a-traits-editor-from-a-matplotlib-plot" id="id32" name="id32">4.1&nbsp;&nbsp;&nbsp;Making a <cite>traits</cite> editor from a MatPlotLib plot</a></li>
</ul>
</li>
<li><a class="reference" href="#putting-it-all-together-a-sample-application" id="id33" name="id33">5&nbsp;&nbsp;&nbsp;Putting it all together: a sample application</a><ul class="auto-toc">
<li><a class="reference" href="#the-imports" id="id34" name="id34">5.1&nbsp;&nbsp;&nbsp;The imports</a></li>
<li><a class="reference" href="#user-interface-objects" id="id35" name="id35">5.2&nbsp;&nbsp;&nbsp;User interface objects</a></li>
<li><a class="reference" href="#threads-and-flow-control" id="id36" name="id36">5.3&nbsp;&nbsp;&nbsp;Threads and flow control</a></li>
<li><a class="reference" href="#the-gui-elements" id="id37" name="id37">5.4&nbsp;&nbsp;&nbsp;The GUI elements</a></li>
</ul>
</li>
</ul>
</div>
<hr class="docutils" />
<p>Building interactive Graphical User Interfaces (GUIs) is a hard problem,
especially for somebody who has not had training in IT. TraitsUI is a
python module that provides a great answer to this problem. I have found
that I am incredibly productive when creating graphical application using
traitsUI. However I had to learn a few new concepts and would like to
lay them down together in order to make it easier for others to follow my
footsteps.</p>
<p>This document is intended to help a non-programmer to use traits and
traitsUI to write an interactive graphical application.
The reader is assumed to have some basic python scripting knowledge (see
ref <a class="footnote-reference" href="#id9" id="id1" name="id1">[1]</a> for a basic introduction).
Knowledge of numpy/scipy <a class="footnote-reference" href="#id10" id="id2" name="id2">[2]</a> helps understanding the
data processing aspects of the examples, but may not be paramount. Some
examples rely on matplotlib <a class="footnote-reference" href="#id11" id="id3" name="id3">[3]</a> . This
document is <strong>not</strong> a replacement for user manuals and references of the
different packages (traitsUI <a class="footnote-reference" href="#id12" id="id4" name="id4">[4]</a>, scipy, matplotlib). It provides a
&quot;cookbook&quot; approach, and not a reference.</p>
<p>This tutorial provides step-by-step guide to building a medium-size
application. The example chosen is an application used to do control of a
camera, analysis of the retrieved data and display of the results. This
tutorial focuses on building the general structure and flow-control of
the application, and on the aspects specific to traitsUI programming.
Interfacing with the hardware or processing the data is left aside. The
tutorial progressively introduces the tools used, and in the end present
the skeleton of a real application that has been developed for real-time
controlling of an experiment, monitoring through a camera, and processing
the data. The tutorial goes into more and more intricate details that are
necessary to build the final application. Each section is in itself
independent of the following ones. The complete beginner trying to use
this as an introduction should not expect to understand all the details
in a first pass.</p>
<p>The author's experience while working on several projects in various
physics labs is that code tends to be created in an 'organic' way, by
different people with various levels of qualification in computer
development, and that it rapidly decays to a disorganized and
hard-to-maintain code base. This tutorial tries to prevent this by
building an application shaped for modularity and readability.</p>
<div class="section">
<h1><a class="toc-backref" href="#id17" id="from-objects-to-dialogs-using-traitsui" name="from-objects-to-dialogs-using-traitsui">1&nbsp;&nbsp;&nbsp;From objects to dialogs using traitsUI</a></h1>
<p>Creating user interfaces directly through a toolkit is a time-consuming
process. It is also a process that does not integrate well in the
scientific-computing work-flow, as, during the elaboration of algorithms
and data-flow, the objects that are represented in the GUI are likely to
change often.</p>
<p>Visual computing, where the programmer creates first a graphical
interface and then writes the callbacks of the graphical objects, gives
rise to a slow development cycle, as the work-flow is centered on the
GUI, and not on the code.</p>
<p>TraitsUI provides a beautiful answer to this problem by building
graphical representations of an object. Traits and TraitsUI have their
own manuals (<a class="reference" href="http://code.enthought.com/traits/">http://code.enthought.com/traits/</a>) and the reader is encouraged to
refer to these for more information.</p>
<p>We will use TraitsUI for <em>all</em> our GUIs. This forces us to store all the
data and parameters in objects, which is good programming style. The GUI
thus reflects the structure of the code, which makes it easier to
understand and extend.</p>
<p>In this section we will focus on creating dialogs that allow the user to
input parameters graphically in the program.</p>
<div class="section">
<h2><a class="toc-backref" href="#id18" id="object-oriented-programming" name="object-oriented-programming">1.1&nbsp;&nbsp;&nbsp;Object-oriented programming</a></h2>
<p>Software engineering is a difficult field. As programs, grow they become
harder and harder to grasp for the developer. This problem is not new and
has sometimes been know as the &quot;tar pit&quot;. Many attempts have been made to
mitigate the difficulties. Most often they consist in finding useful
abstractions that allow the developer to manipulate larger ideas, rather
than their software implementation.</p>
<p>Code re-use is paramount for good software development. It reduces the
number of code-lines required to read and understand and allows to
identify large operations in the code. Functions and procedures have been
invented to avoid copy and pasting code, and hide the low-level details
of an operation.</p>
<p>Object-oriented programming allows yet more modularity and abstraction.</p>
<div class="section">
<h3><a class="toc-backref" href="#id19" id="objects-attributes-and-methods" name="objects-attributes-and-methods">1.1.1&nbsp;&nbsp;&nbsp;Objects, attributes and methods</a></h3>
<p>Suppose you want your program to manipulate geometric objects. You can
teach the computer that a point is a set of 3 numbers, you can teach it
how to rotate that point along a given axis. Now you want to use spheres
too. With a bit more work your program has functions to create points,
spheres, etc. It knows how to rotate them, to mirror them, to scale them.
So in pure procedural programming you will have procedures to rotate,
scale, mirror, each one of your objects. If you want to rotate an
object you will first have to find its type, then apply the right
procedure to rotate it.</p>
<p>Object-oriented programming introduces a new abstraction: the <cite>object</cite>.
It consists of both data (our 3 numbers, in the case of a point), and
procedures that use and modify this data (e.g., rotations). The data
entries are called &quot;<cite>attributes</cite>&quot; of the object and the procedures
&quot;<cite>methods</cite>&quot;. Thus with object oriented programming an object &quot;knows&quot; how
to be rotated.</p>
<p>A point object could be implemented in python with:</p>
<blockquote>
<p><a class="reference" href="http://gael-varoquaux.info/computers/traits_tutorial/code_block0_py">code snippet #0</a></p>
<div class="pysrc"><span class="pykeyword">from</span> <span class="pytext">numpy</span> <span class="pykeyword">import</span> <span class="pytext">cos</span><span class="pyoperator">,</span> <span class="pytext">sin</span>

<span class="pykeyword">class</span> <span class="pytext">Point</span><span class="pyoperator">(</span><span class="pytext">object</span><span class="pyoperator">)</span><span class="pyoperator">:</span>
    <span class="pystring">""" 3D Point objects """</span>
    <span class="pytext">x</span> <span class="pyoperator">=</span> <span class="pynumber">0.</span>
    <span class="pytext">y</span> <span class="pyoperator">=</span> <span class="pynumber">0.</span>
    <span class="pytext">z</span> <span class="pyoperator">=</span> <span class="pynumber">0.</span>

    <span class="pykeyword">def</span> <span class="pytext">rotate_z</span><span class="pyoperator">(</span><span class="pytext">self</span><span class="pyoperator">,</span> <span class="pytext">theta</span><span class="pyoperator">)</span><span class="pyoperator">:</span>
        <span class="pystring">""" rotate the point around the Z axis """</span>
        <span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">x</span> <span class="pyoperator">=</span>  <span class="pytext">cos</span><span class="pyoperator">(</span><span class="pytext">theta</span><span class="pyoperator">)</span> <span class="pyoperator">*</span> <span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">x</span> <span class="pyoperator">+</span> <span class="pytext">sin</span><span class="pyoperator">(</span><span class="pytext">theta</span><span class="pyoperator">)</span> <span class="pyoperator">*</span> <span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">y</span>
        <span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">y</span> <span class="pyoperator">=</span> <span class="pyoperator">-</span><span class="pytext">sin</span><span class="pyoperator">(</span><span class="pytext">theta</span><span class="pyoperator">)</span> <span class="pyoperator">*</span> <span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">x</span> <span class="pyoperator">+</span> <span class="pytext">cos</span><span class="pyoperator">(</span><span class="pytext">theta</span><span class="pyoperator">)</span> <span class="pyoperator">*</span> <span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">y</span><span class="pytext"></span></div>
</blockquote>
<p>This code creates a <em>Point</em> class. Points objects can be created as
<cite>instances</cite> of the Point class:</p>
<blockquote>
<div class="pysrc"><span class="pyoperator">&gt;&gt;</span><span class="pyoperator">&gt;</span> <span class="pytext">p</span> <span class="pyoperator">=</span> <span class="pytext">Point</span><span class="pyoperator">(</span><span class="pyoperator">)</span>
<span class="pyoperator">&gt;&gt;</span><span class="pyoperator">&gt;</span> <span class="pytext">p</span><span class="pyoperator">.</span><span class="pytext">x</span> <span class="pyoperator">=</span> <span class="pynumber">1</span>
<span class="pyoperator">&gt;&gt;</span><span class="pyoperator">&gt;</span> <span class="pytext">p</span><span class="pyoperator">.</span><span class="pytext">rotate_z</span><span class="pyoperator">(</span><span class="pytext">pi</span><span class="pyoperator">)</span>
<span class="pyoperator">&gt;&gt;</span><span class="pyoperator">&gt;</span> <span class="pytext">p</span><span class="pyoperator">.</span><span class="pytext">x</span>
<span class="pyoperator">-</span><span class="pynumber">1.0</span>
<span class="pyoperator">&gt;&gt;</span><span class="pyoperator">&gt;</span> <span class="pytext">p</span><span class="pyoperator">.</span><span class="pytext">y</span>
<span class="pynumber">1.2246467991473532e-16</span><span class="pytext"></span></div>
</blockquote>
<p>When manipulating objects, the developer does not need to know the
internal details of their procedures. As long as the object has a
<em>rotate</em> method, the developer knows how to rotate it.</p>
<blockquote>
<p><strong>Note</strong>: Beginners often use objects as structures: entities with
several data fields useful to pass data around in a program. Objects
are much more then that: they have methods. They are 'active' data
structures that know how to modify themselves. Part of the point of
object-oriented programming is that the object is responsible for
modifying itself through its methods. The object therefore takes care
of its internal logic and the consistency between its attributes.</p>
<p>In python, dictionaries make great structures and are more suited
for such a use than objects.</p>
</blockquote>
</div>
<div class="section">
<h3><a class="toc-backref" href="#id20" id="classes-and-inheritance" name="classes-and-inheritance">1.1.2&nbsp;&nbsp;&nbsp;Classes and inheritance</a></h3>
<p>Suppose you have already created a <em>Point</em> class that tells your program what
a point is, but that you also want some points to have a color. Instead
of copy-and-pasting the <em>Point</em> class and adding a color attribute, you can
define a new class <em>ColoredPoint</em> that inherits all of the <em>Point</em>
class's methods and attributes:</p>
<blockquote>
<div class="pysrc"><span class="pykeyword">class</span> <span class="pytext">ColoredPoint</span><span class="pyoperator">(</span><span class="pytext">Point</span><span class="pyoperator">)</span><span class="pyoperator">:</span>
    <span class="pystring">""" Colored 3D point """</span>
    <span class="pytext">color</span> <span class="pyoperator">=</span> <span class="pystring">"white"</span><span class="pytext"></span></div>
</blockquote>
<p>You do not have to implement rotation for the <em>ColoredPoint</em> class as it
has been inherited from the <em>Point</em> class. This is one of the huge gains
of object-oriented programming: objects are organized in classes and
sub-classes, and method to manipulate objects are derived from the
objects parent-ship: a <em>ColoredPoint</em> is only a special case of
<em>Point</em>. This proves very handy on large projects.</p>
<blockquote>
<strong>Note</strong>: To stress the differences between classes and their
instances (objects), classes are usually named with capital letters,
and objects only with lower case letters.</blockquote>
</div>
</div>
<div class="section">
<h2><a class="toc-backref" href="#id21" id="an-object-and-its-representation" name="an-object-and-its-representation">1.2&nbsp;&nbsp;&nbsp;An object and its representation</a></h2>
<p>Objects are code entities that can be easily pictured by the developer.
The <cite>TraitsUI</cite> python module allows the user to edit objects attributes
with dialogs that form a graphical representation of the object.</p>
<p>In our example application, each process or experimental device is
represented in the code as an object. These objects all inherit from the
<em>HasTraits</em>, class which supports creating graphical representations of
attributes. To be able to build the dialog, the <em>HasTraits</em> class
enforces that the types of all the attributes are specified in the class
definition.</p>
<p>The <em>HasTraits</em> objects have a <em>configure_traits()</em> method that brings up
a dialog to edit the objects' attributes specified in its class
definition.</p>
<p>Here we define a camera object (which, in our real world example, is a
camera interfaced to python through the ctypes <a class="footnote-reference" href="#id14" id="id5" name="id5">[5]</a> module), and show how
to open a dialog to edit its properties :</p>
<blockquote>
<p><a class="reference" href="http://gael-varoquaux.info/computers/traits_tutorial/code_block1_py">code snippet #1</a></p>
<div class="pysrc"><span class="pykeyword">from</span> <span class="pytext">enthought</span><span class="pyoperator">.</span><span class="pytext">traits</span><span class="pyoperator">.</span><span class="pytext">api</span> <span class="pykeyword">import</span> <span class="pyoperator">*</span>
<span class="pykeyword">from</span> <span class="pytext">enthought</span><span class="pyoperator">.</span><span class="pytext">traits</span><span class="pyoperator">.</span><span class="pytext">ui</span><span class="pyoperator">.</span><span class="pytext">api</span> <span class="pykeyword">import</span> <span class="pyoperator">*</span>

<span class="pykeyword">class</span> <span class="pytext">Camera</span><span class="pyoperator">(</span><span class="pytext">HasTraits</span><span class="pyoperator">)</span><span class="pyoperator">:</span>
    <span class="pystring">""" Camera object """</span>

    <span class="pytext">gain</span> <span class="pyoperator">=</span> <span class="pytext">Enum</span><span class="pyoperator">(</span><span class="pynumber">1</span><span class="pyoperator">,</span> <span class="pynumber">2</span><span class="pyoperator">,</span> <span class="pynumber">3</span><span class="pyoperator">,</span>
        <span class="pytext">desc</span><span class="pyoperator">=</span><span class="pystring">"the gain index of the camera"</span><span class="pyoperator">,</span>
        <span class="pytext">label</span><span class="pyoperator">=</span><span class="pystring">"gain"</span><span class="pyoperator">,</span> <span class="pyoperator">)</span>

    <span class="pytext">exposure</span> <span class="pyoperator">=</span> <span class="pytext">CInt</span><span class="pyoperator">(</span><span class="pynumber">10</span><span class="pyoperator">,</span>
        <span class="pytext">desc</span><span class="pyoperator">=</span><span class="pystring">"the exposure time, in ms"</span><span class="pyoperator">,</span>
        <span class="pytext">label</span><span class="pyoperator">=</span><span class="pystring">"Exposure"</span><span class="pyoperator">,</span> <span class="pyoperator">)</span>

    <span class="pykeyword">def</span> <span class="pytext">capture</span><span class="pyoperator">(</span><span class="pytext">self</span><span class="pyoperator">)</span><span class="pyoperator">:</span>
        <span class="pystring">""" Captures an image on the camera and returns it """</span>
        <span class="pykeyword">print</span> <span class="pystring">"capturing an image at %i ms exposure, gain: %i"</span> <span class="pyoperator">%</span> <span class="pyoperator">(</span>
                <span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">exposure</span><span class="pyoperator">,</span> <span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">gain</span> <span class="pyoperator">)</span>

<span class="pykeyword">if</span> <span class="pytext">__name__</span> <span class="pyoperator">==</span> <span class="pystring">"__main__"</span><span class="pyoperator">:</span>
    <span class="pytext">camera</span> <span class="pyoperator">=</span> <span class="pytext">Camera</span><span class="pyoperator">(</span><span class="pyoperator">)</span>
    <span class="pytext">camera</span><span class="pyoperator">.</span><span class="pytext">configure_traits</span><span class="pyoperator">(</span><span class="pyoperator">)</span>
    <span class="pytext">camera</span><span class="pyoperator">.</span><span class="pytext">capture</span><span class="pyoperator">(</span><span class="pyoperator">)</span><span class="pytext"></span></div>
</blockquote>
<p>The <em>camera.configure_traits()</em> call in the above example opens a dialog
that allows the user to modify the camera object's attributes:</p>
<blockquote>
<img alt="code_block1.png" src="code_block1.png" />
</blockquote>
<p>This dialog forms a graphical representation of our camera object. We
will see that it can be embedded in GUI panels to build more complex GUIs
that allow us to control many objects.</p>
<p>We will build our application around objects and their graphical
representation, as this mapping of the code to the GUI helps the developer
to understand the code.</p>
</div>
<div class="section">
<h2><a class="toc-backref" href="#id22" id="displaying-several-objects-in-the-same-panel" name="displaying-several-objects-in-the-same-panel">1.3&nbsp;&nbsp;&nbsp;Displaying several objects in the same panel</a></h2>
<p>We now know how to build a dialog from objects. If we want to build
a complex application we are likely to have several objects, for instance
one corresponding to the camera we want to control, and one describing
the experiment that the camera monitors. We do not want to have to open a
new dialog per object: this would force us to describe the GUI in
terms of graphical objects, and not structural objects. We want the GUI
to be a natural representation of our objects, and we want the Traits
module to take care of that.</p>
<p>The solution is to create a container object, that has as attributes the
objects we want to represent. Playing with the <cite>View</cite> attribute of the
object, we can control how the representation generated by Traits looks
like (see the TraitsUI manual):</p>
<blockquote>
<p><a class="reference" href="http://gael-varoquaux.info/computers/traits_tutorial/container_py">code snippet #2</a></p>
<div class="pysrc"><span class="pykeyword">from</span> <span class="pytext">enthought</span><span class="pyoperator">.</span><span class="pytext">traits</span><span class="pyoperator">.</span><span class="pytext">api</span> <span class="pykeyword">import</span> <span class="pyoperator">*</span>
<span class="pykeyword">from</span> <span class="pytext">enthought</span><span class="pyoperator">.</span><span class="pytext">traits</span><span class="pyoperator">.</span><span class="pytext">ui</span><span class="pyoperator">.</span><span class="pytext">api</span> <span class="pykeyword">import</span> <span class="pyoperator">*</span>

<span class="pykeyword">class</span> <span class="pytext">Camera</span><span class="pyoperator">(</span><span class="pytext">HasTraits</span><span class="pyoperator">)</span><span class="pyoperator">:</span>
    <span class="pytext">gain</span> <span class="pyoperator">=</span> <span class="pytext">Enum</span><span class="pyoperator">(</span><span class="pynumber">1</span><span class="pyoperator">,</span> <span class="pynumber">2</span><span class="pyoperator">,</span> <span class="pynumber">3</span><span class="pyoperator">,</span> <span class="pyoperator">)</span>
    <span class="pytext">exposure</span> <span class="pyoperator">=</span> <span class="pytext">CInt</span><span class="pyoperator">(</span><span class="pynumber">10</span><span class="pyoperator">,</span> <span class="pytext">label</span><span class="pyoperator">=</span><span class="pystring">"Exposure"</span><span class="pyoperator">,</span> <span class="pyoperator">)</span>

<span class="pykeyword">class</span> <span class="pytext">TextDisplay</span><span class="pyoperator">(</span><span class="pytext">HasTraits</span><span class="pyoperator">)</span><span class="pyoperator">:</span>
    <span class="pytext">string</span> <span class="pyoperator">=</span> <span class="pytext">String</span><span class="pyoperator">(</span><span class="pyoperator">)</span>

    <span class="pytext">view</span><span class="pyoperator">=</span> <span class="pytext">View</span><span class="pyoperator">(</span> <span class="pytext">Item</span><span class="pyoperator">(</span><span class="pystring">'string'</span><span class="pyoperator">,</span> <span class="pytext">show_label</span><span class="pyoperator">=</span><span class="pytext">False</span><span class="pyoperator">,</span> <span class="pytext">springy</span><span class="pyoperator">=</span><span class="pytext">True</span><span class="pyoperator">,</span> <span class="pytext">style</span><span class="pyoperator">=</span><span class="pystring">'custom'</span> <span class="pyoperator">)</span><span class="pyoperator">)</span>

<span class="pykeyword">class</span> <span class="pytext">Container</span><span class="pyoperator">(</span><span class="pytext">HasTraits</span><span class="pyoperator">)</span><span class="pyoperator">:</span>
    <span class="pytext">camera</span> <span class="pyoperator">=</span> <span class="pytext">Instance</span><span class="pyoperator">(</span><span class="pytext">Camera</span><span class="pyoperator">)</span>
    <span class="pytext">display</span> <span class="pyoperator">=</span> <span class="pytext">Instance</span><span class="pyoperator">(</span><span class="pytext">TextDisplay</span><span class="pyoperator">)</span>

    <span class="pytext">view</span> <span class="pyoperator">=</span> <span class="pytext">View</span><span class="pyoperator">(</span>
                <span class="pytext">Item</span><span class="pyoperator">(</span><span class="pystring">'camera'</span><span class="pyoperator">,</span> <span class="pytext">style</span><span class="pyoperator">=</span><span class="pystring">'custom'</span><span class="pyoperator">,</span> <span class="pytext">show_label</span><span class="pyoperator">=</span><span class="pytext">False</span><span class="pyoperator">,</span> <span class="pyoperator">)</span><span class="pyoperator">,</span>
                <span class="pytext">Item</span><span class="pyoperator">(</span><span class="pystring">'display'</span><span class="pyoperator">,</span> <span class="pytext">style</span><span class="pyoperator">=</span><span class="pystring">'custom'</span><span class="pyoperator">,</span> <span class="pytext">show_label</span><span class="pyoperator">=</span><span class="pytext">False</span><span class="pyoperator">,</span> <span class="pyoperator">)</span><span class="pyoperator">,</span>
            <span class="pyoperator">)</span>

<span class="pytext">container</span> <span class="pyoperator">=</span> <span class="pytext">Container</span><span class="pyoperator">(</span><span class="pytext">camera</span><span class="pyoperator">=</span><span class="pytext">Camera</span><span class="pyoperator">(</span><span class="pyoperator">)</span><span class="pyoperator">,</span> <span class="pytext">display</span><span class="pyoperator">=</span><span class="pytext">TextDisplay</span><span class="pyoperator">(</span><span class="pyoperator">)</span><span class="pyoperator">)</span>
<span class="pytext">container</span><span class="pyoperator">.</span><span class="pytext">configure_traits</span><span class="pyoperator">(</span><span class="pyoperator">)</span><span class="pytext"></span></div>
</blockquote>
<p>The call to <em>configure_traits()</em> creates the following dialog, with the
representation of the <em>Camera</em> object created is the last example on top,
and the <em>Display</em> object below it:</p>
<blockquote>
<img alt="container.png" src="container.png" />
</blockquote>
<p>The <em>View</em> attribute of the <em>container</em> object has been tweaked to get
the representation we are interested in: traitsUI is told to display the
<em>camera</em> item with a <em>'custom'</em> style, which instructs it to display the
representation of the object inside the current panel. The <em>'show_label'</em>
argument is set to <em>False</em> as we do not want the name of the displayed
object ('camera', for instance) to appear in the dialog. See the traitsUI
manual for more details on this powerful feature.</p>
<p>The <em>camera</em> and <em>display</em> objects are created during the call to the
creator of the <em>container</em> object, and passed as its attributes
immediately: <em>&quot;container = Container(camera=Camera(),
display=TextDisplay())&quot;</em></p>
</div>
<div class="section">
<h2><a class="toc-backref" href="#id23" id="writing-a-graphical-script" name="writing-a-graphical-script">1.4&nbsp;&nbsp;&nbsp;Writing a &quot;graphical script&quot;</a></h2>
<p>If you want to create an application that has a very linear flow, popping
up dialogs when user input is required, like a &quot;setup wizard&quot; often used
to install programs, you already have all the tools to do it. You can use
object oriented programming to write your program, and call the objects
<em>configure_traits</em> method each time you need user input. This might an
easy way to modify an existing script to make it more user friendly.</p>
<hr class="docutils" />
<p>The following section will focus on making interactive programs, where
the user uses the graphical interface to interact with it in a continuous
way.</p>
</div>
</div>
<div class="section">
<h1><a class="toc-backref" href="#id24" id="from-graphical-to-interactive" name="from-graphical-to-interactive">2&nbsp;&nbsp;&nbsp;From graphical to interactive</a></h1>
<p>In an interactive application, the program responds to user interaction.
This requires a slight paradigm shift in our programming methods.</p>
<div class="section">
<h2><a class="toc-backref" href="#id25" id="object-oriented-guis-and-event-loops" name="object-oriented-guis-and-event-loops">2.1&nbsp;&nbsp;&nbsp;Object-oriented GUIs and event loops</a></h2>
<p>In a GUI application, the order in which the different parts of the
program are executed is imposed by the user, unlike in a numerical
algorithm, for instance, where the developer chooses the order of
execution of his program. An event loop allows the programmer to develop
an application in which each user action triggers an event, by stacking
the user created events on a queue, and processing them in the order in
which the appeared.</p>
<p>A complex GUI is made of a large numbers of graphical elements, called
widgets (e.g., text boxes, check boxes, buttons, menus). Each of these
widgets has specific behaviors associated with user interaction
(modifying the content of a text box, clicking on a button, opening a
menu). It is natural to use objects to represent the widgets, with their
behavior being set in the object's methods.</p>
<p>Dialogs populated with widgets are automatically created by <cite>traitsUI</cite> in
the <em>configure_traits()</em> call. <cite>traitsUI</cite> allow the developer to not
worry about widgets, but to deal only with objects and their attributes.
This is a fabulous gain as the widgets no longer appear in the code, but
only the attributes they are associated to.</p>
<p>A <em>HasTraits</em> object has an <em>edit_traits()</em> method that creates a
graphical panel to edit its attributes. This method creates and returns
the panel, but does not start its event loop. The panel is not yet
&quot;alive&quot;, unlike with the <em>configure_traits()</em> method. Traits uses the
wxWidget toolkit by default to create its widget. They can be turned live
and displayed by starting a wx application, and its main loop (ie event
loop in wx speech).</p>
<blockquote>
<p><a class="reference" href="http://gael-varoquaux.info/computers/traits_tutorial/event_loop_py">code snippet #3</a></p>
<div class="pysrc"><span class="pykeyword">from</span> <span class="pytext">enthought</span><span class="pyoperator">.</span><span class="pytext">traits</span><span class="pyoperator">.</span><span class="pytext">api</span> <span class="pykeyword">import</span> <span class="pyoperator">*</span>
<span class="pykeyword">import</span> <span class="pytext">wx</span>

<span class="pykeyword">class</span> <span class="pytext">Counter</span><span class="pyoperator">(</span><span class="pytext">HasTraits</span><span class="pyoperator">)</span><span class="pyoperator">:</span>
    <span class="pytext">value</span> <span class="pyoperator">=</span>  <span class="pytext">Int</span><span class="pyoperator">(</span><span class="pyoperator">)</span>

<span class="pytext">Counter</span><span class="pyoperator">(</span><span class="pyoperator">)</span><span class="pyoperator">.</span><span class="pytext">edit_traits</span><span class="pyoperator">(</span><span class="pyoperator">)</span>
<span class="pytext">wx</span><span class="pyoperator">.</span><span class="pytext">PySimpleApp</span><span class="pyoperator">(</span><span class="pyoperator">)</span><span class="pyoperator">.</span><span class="pytext">MainLoop</span><span class="pyoperator">(</span><span class="pyoperator">)</span><span class="pytext"></span></div>
</blockquote>
<p>The <em>Counter().edit_traits()</em> line creates a counter object and its
representation, a dialog with one integer represented. However it does
not display it until a wx application is created, and its main loop is
started.</p>
<p>Usually it is not necessary to create the wx application yourself, and to
start its main loop, traits will do all this for you when the
<em>.configure_traits()</em> method is called.</p>
</div>
<div class="section">
<h2><a class="toc-backref" href="#id26" id="reactive-programming" name="reactive-programming">2.2&nbsp;&nbsp;&nbsp;Reactive programming</a></h2>
<p>When the event loop is started, the program flow is no longer simply
controlled by the code: the control is passed on to the event loop, and
it processes events, until the user closes the GUI, and the event loop
returns to the code.</p>
<p>Interactions with objects generate events, and these events can be
associated to callbacks, ie functions or methods processing the event. In
a GUI, callbacks created by user-generated events are placed on an &quot;event
stack&quot;. The event loop process each call on the event queue one after the
other, thus emptying the event queue. The flow of the program is still
sequential (two code blocks never run at the same time in an event loop),
but the execution order is chosen by the user, and not by the developer.</p>
<p>Defining callbacks for the modification of an attribute <cite>foo</cite> of a
<cite>HasTraits</cite> object can be done be creating a method called
<cite>_foo_changed()</cite>. Here is an example of a dialog with two textboxes,
<cite>input</cite> and <cite>output</cite>. Each time <cite>input</cite> is modified, its content is
duplicated to output.</p>
<blockquote>
<p><a class="reference" href="http://gael-varoquaux.info/computers/traits_tutorial/echo_box_py">code snippet #4</a></p>
<div class="pysrc"><span class="pykeyword">from</span> <span class="pytext">enthought</span><span class="pyoperator">.</span><span class="pytext">traits</span><span class="pyoperator">.</span><span class="pytext">api</span> <span class="pykeyword">import</span> <span class="pyoperator">*</span>

<span class="pykeyword">class</span> <span class="pytext">EchoBox</span><span class="pyoperator">(</span><span class="pytext">HasTraits</span><span class="pyoperator">)</span><span class="pyoperator">:</span>
    <span class="pytext">input</span> <span class="pyoperator">=</span>  <span class="pytext">Str</span><span class="pyoperator">(</span><span class="pyoperator">)</span>
    <span class="pytext">output</span> <span class="pyoperator">=</span> <span class="pytext">Str</span><span class="pyoperator">(</span><span class="pyoperator">)</span>

    <span class="pykeyword">def</span> <span class="pytext">_input_changed</span><span class="pyoperator">(</span><span class="pytext">self</span><span class="pyoperator">)</span><span class="pyoperator">:</span>
        <span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">output</span> <span class="pyoperator">=</span> <span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">input</span>

<span class="pytext">EchoBox</span><span class="pyoperator">(</span><span class="pyoperator">)</span><span class="pyoperator">.</span><span class="pytext">configure_traits</span><span class="pyoperator">(</span><span class="pyoperator">)</span><span class="pytext"></span></div>
</blockquote>
<p>Event that do not correspond to a modification of an attribute can be
generated with a <em>Button</em> traits. The callback is then called
<em>_foo_fired()</em>.
Here is an example of an interactive <cite>traitsUI</cite> application using a
button:</p>
<blockquote>
<p><a class="reference" href="http://gael-varoquaux.info/computers/traits_tutorial/interactive_py">code snippet #5</a></p>
<div class="pysrc"><span class="pykeyword">from</span> <span class="pytext">enthought</span><span class="pyoperator">.</span><span class="pytext">traits</span><span class="pyoperator">.</span><span class="pytext">api</span> <span class="pykeyword">import</span> <span class="pyoperator">*</span>
<span class="pykeyword">from</span> <span class="pytext">enthought</span><span class="pyoperator">.</span><span class="pytext">traits</span><span class="pyoperator">.</span><span class="pytext">ui</span><span class="pyoperator">.</span><span class="pytext">api</span> <span class="pykeyword">import</span> <span class="pytext">View</span><span class="pyoperator">,</span> <span class="pytext">Item</span><span class="pyoperator">,</span> <span class="pytext">ButtonEditor</span>

<span class="pykeyword">class</span> <span class="pytext">Counter</span><span class="pyoperator">(</span><span class="pytext">HasTraits</span><span class="pyoperator">)</span><span class="pyoperator">:</span>
    <span class="pytext">value</span> <span class="pyoperator">=</span>  <span class="pytext">Int</span><span class="pyoperator">(</span><span class="pyoperator">)</span>
    <span class="pytext">add_one</span> <span class="pyoperator">=</span> <span class="pytext">Button</span><span class="pyoperator">(</span><span class="pyoperator">)</span>

    <span class="pykeyword">def</span> <span class="pytext">_add_one_fired</span><span class="pyoperator">(</span><span class="pytext">self</span><span class="pyoperator">)</span><span class="pyoperator">:</span>
        <span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">value</span> <span class="pyoperator">+=</span><span class="pynumber">1</span>

    <span class="pytext">view</span> <span class="pyoperator">=</span> <span class="pytext">View</span><span class="pyoperator">(</span><span class="pystring">'value'</span><span class="pyoperator">,</span> <span class="pytext">Item</span><span class="pyoperator">(</span><span class="pystring">'add_one'</span><span class="pyoperator">,</span> <span class="pytext">show_label</span><span class="pyoperator">=</span><span class="pytext">False</span> <span class="pyoperator">)</span><span class="pyoperator">)</span>

<span class="pytext">Counter</span><span class="pyoperator">(</span><span class="pyoperator">)</span><span class="pyoperator">.</span><span class="pytext">configure_traits</span><span class="pyoperator">(</span><span class="pyoperator">)</span><span class="pytext"></span></div>
</blockquote>
<p>Clicking on the button adds the <em>_add_one_fired()</em> method to the event
queue, and this method gets executed as soon as the GUI is ready to
handle it. Most of the time that is almost immediately.</p>
<blockquote>
<img alt="interactive.png" src="interactive.png" />
</blockquote>
<p>This programming pattern is called <cite>reactive programming</cite>: the objects
react to the changes made to their attributes. In complex programs where
the order of execution is hard to figure out, and bound to change, like
some interactive data processing application, this pattern is extremely
efficient.</p>
<hr class="docutils" />
<p>Using <em>Button</em> traits and a clever set of objects interacting with each
others, complex interactive applications can be built. These applications
are governed by the events generated by the user, in contrast to
script-like applications (batch programming). Executing a long operation
in the event loop blocks the reactions of the user-interface, as other
events callbacks are not processed as long as the long operation is not
finished. In the next section we will see how we can execute several
operations in the same time.</p>
</div>
</div>
<div class="section">
<h1><a class="toc-backref" href="#id27" id="breaking-the-flow-in-multiple-threads" name="breaking-the-flow-in-multiple-threads">3&nbsp;&nbsp;&nbsp;Breaking the flow in multiple threads</a></h1>
<div class="section">
<h2><a class="toc-backref" href="#id28" id="what-are-threads" name="what-are-threads">3.1&nbsp;&nbsp;&nbsp;What are threads ?</a></h2>
<p>A standard python program executes in a sequential way. Consider the
following code snippet :</p>
<blockquote>
<div class="pysrc"><span class="pytext">do_a</span><span class="pyoperator">(</span><span class="pyoperator">)</span>
<span class="pytext">do_b</span><span class="pyoperator">(</span><span class="pyoperator">)</span>
<span class="pytext">do_c</span><span class="pyoperator">(</span><span class="pyoperator">)</span><span class="pytext"></span></div>
</blockquote>
<p><em>do_b()</em> is not called until <em>do_a()</em> is finished. Even in event loops
everything is sequential. In some situation this can be very limiting.
Suppose we want to capture an image from a camera and that it is a very
lengthy operation. Suppose also that no other operation in our program
requires the capture to be complete. We would like to have a different
&quot;timeline&quot; in which the camera capture instructions can happen in a
sequential way, while the rest of the program continues in parallel.</p>
<p>Threads are the solution to this problem: a thread is a portion of a
program that can run concurrently with other portions of the program.</p>
<p>Programming with threads is difficult as instructions are no longer
executed in the order they are specified and the output of a program can
vary from a run to another, depending on subtle timing issues. These
problems are known as &quot;race conditions&quot; and to minimize them you should
avoid accessing the same objects in different threads. Indeed if two
different threads are modifying the same object at the same time,
unexpected things can happen.</p>
</div>
<div class="section">
<h2><a class="toc-backref" href="#id29" id="threads-in-python" name="threads-in-python">3.2&nbsp;&nbsp;&nbsp;Threads in python</a></h2>
<p>In python a thread can be implemented with a <em>Thread</em> object, from the
threading <a class="footnote-reference" href="#id15" id="id6" name="id6">[6]</a> module. To create your own execution thread, subclass the
<em>Thread</em> object and put the code that you want to run in a separate
thread in its <em>run</em> method. You can start your thread using its <em>start</em>
method:</p>
<blockquote>
<p><a class="reference" href="http://gael-varoquaux.info/computers/traits_tutorial/thread_example_py">code snippet #6</a></p>
<div class="pysrc"><span class="pykeyword">from</span> <span class="pytext">threading</span> <span class="pykeyword">import</span> <span class="pytext">Thread</span>
<span class="pykeyword">from</span> <span class="pytext">time</span> <span class="pykeyword">import</span> <span class="pytext">sleep</span>

<span class="pykeyword">class</span> <span class="pytext">MyThread</span><span class="pyoperator">(</span><span class="pytext">Thread</span><span class="pyoperator">)</span><span class="pyoperator">:</span>
    <span class="pykeyword">def</span> <span class="pytext">run</span><span class="pyoperator">(</span><span class="pytext">self</span><span class="pyoperator">)</span><span class="pyoperator">:</span>
        <span class="pytext">sleep</span><span class="pyoperator">(</span><span class="pynumber">2</span><span class="pyoperator">)</span>
        <span class="pykeyword">print</span> <span class="pystring">"MyThread done"</span>

<span class="pytext">my_thread</span> <span class="pyoperator">=</span> <span class="pytext">MyThread</span><span class="pyoperator">(</span><span class="pyoperator">)</span>

<span class="pytext">my_thread</span><span class="pyoperator">.</span><span class="pytext">start</span><span class="pyoperator">(</span><span class="pyoperator">)</span>
<span class="pykeyword">print</span> <span class="pystring">"Main thread done"</span><span class="pytext"></span></div>
</blockquote>
<p>The above code yields the following output:</p>
<pre class="literal-block">
Main thread done
MyThread done
</pre>
</div>
<div class="section">
<h2><a class="toc-backref" href="#id30" id="getting-threads-and-the-gui-event-loop-to-play-nice" name="getting-threads-and-the-gui-event-loop-to-play-nice">3.3&nbsp;&nbsp;&nbsp;Getting threads and the GUI event loop to play nice</a></h2>
<p>Suppose you have a long-running job in a TraitsUI application. If you
implement this job as an event placed on the event loop stack, it is
going to freeze the event loop while running, and thus freeze the UI, as
events will accumulate on the stack, but will not be processed as long as
the long-running job is not done (remember, the event loop is
sequential). To keep the UI responsive, a thread is the natural answer.</p>
<p>Most likely you will want to display the results of your long-running job
on the GUI. However, as usual with threads, one has to be careful not to
trigger race-conditions. Naively manipulating the GUI objects in your
thread will lead to race conditions, and unpredictable crash: suppose the
GUI was repainting itself (due to a window move, for instance) when you
modify it.</p>
<p>In a wxPython application, if you start a thread, GUI event will still be
processed by the GUI event loop. To avoid collisions between your thread
and the event loop, the proper way of modifying a GUI object is to insert
the modifications in the event loop, using the <em>GUI.invoke_later()</em> call.
That way the GUI will apply your instructions when it has time.</p>
<p>Recent versions of the TraitsUI module (post October 2006) propagate the
changes you make to a <em>HasTraits</em> object to its representation in a
thread-safe way. However it is important to have in mind that modifying
an object with a graphical representation is likely to trigger
race-conditions as it might be modified by the graphical toolkit while
you are accessing it. Here is an example of code inserting the
modification to traits objects by hand in the event loop:</p>
<blockquote>
<p><a class="reference" href="http://gael-varoquaux.info/computers/traits_tutorial/traits_thread_py">code snippet #7</a></p>
<div class="pysrc"><span class="pykeyword">from</span> <span class="pytext">threading</span> <span class="pykeyword">import</span> <span class="pytext">Thread</span>
<span class="pykeyword">from</span> <span class="pytext">time</span> <span class="pykeyword">import</span> <span class="pytext">sleep</span>
<span class="pykeyword">from</span> <span class="pytext">enthought</span><span class="pyoperator">.</span><span class="pytext">traits</span><span class="pyoperator">.</span><span class="pytext">api</span> <span class="pykeyword">import</span> <span class="pyoperator">*</span>
<span class="pykeyword">from</span> <span class="pytext">enthought</span><span class="pyoperator">.</span><span class="pytext">traits</span><span class="pyoperator">.</span><span class="pytext">ui</span><span class="pyoperator">.</span><span class="pytext">api</span> <span class="pykeyword">import</span> <span class="pytext">View</span><span class="pyoperator">,</span> <span class="pytext">Item</span><span class="pyoperator">,</span> <span class="pytext">ButtonEditor</span>

<span class="pykeyword">class</span> <span class="pytext">TextDisplay</span><span class="pyoperator">(</span><span class="pytext">HasTraits</span><span class="pyoperator">)</span><span class="pyoperator">:</span>
    <span class="pytext">string</span> <span class="pyoperator">=</span>  <span class="pytext">String</span><span class="pyoperator">(</span><span class="pyoperator">)</span>

    <span class="pytext">view</span><span class="pyoperator">=</span> <span class="pytext">View</span><span class="pyoperator">(</span> <span class="pytext">Item</span><span class="pyoperator">(</span><span class="pystring">'string'</span><span class="pyoperator">,</span><span class="pytext">show_label</span><span class="pyoperator">=</span><span class="pytext">False</span><span class="pyoperator">,</span> <span class="pytext">springy</span><span class="pyoperator">=</span><span class="pytext">True</span><span class="pyoperator">,</span> <span class="pytext">style</span><span class="pyoperator">=</span><span class="pystring">'custom'</span> <span class="pyoperator">)</span><span class="pyoperator">)</span>


<span class="pykeyword">class</span> <span class="pytext">CaptureThread</span><span class="pyoperator">(</span><span class="pytext">Thread</span><span class="pyoperator">)</span><span class="pyoperator">:</span>
    <span class="pykeyword">def</span> <span class="pytext">run</span><span class="pyoperator">(</span><span class="pytext">self</span><span class="pyoperator">)</span><span class="pyoperator">:</span>
        <span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">display</span><span class="pyoperator">.</span><span class="pytext">string</span> <span class="pyoperator">=</span> <span class="pystring">'Camera started\n'</span> <span class="pyoperator">+</span> <span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">display</span><span class="pyoperator">.</span><span class="pytext">string</span>
        <span class="pytext">n_img</span> <span class="pyoperator">=</span> <span class="pynumber">0</span>
        <span class="pykeyword">while</span> <span class="pykeyword">not</span> <span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">wants_abort</span><span class="pyoperator">:</span>
            <span class="pytext">sleep</span><span class="pyoperator">(</span><span class="pynumber">.5</span><span class="pyoperator">)</span>
            <span class="pytext">n_img</span> <span class="pyoperator">+=</span> <span class="pynumber">1</span>
            <span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">display</span><span class="pyoperator">.</span><span class="pytext">string</span> <span class="pyoperator">=</span> <span class="pystring">'%d image captured\n'</span> <span class="pyoperator">%</span> <span class="pytext">n_img</span> \
                                                    <span class="pyoperator">+</span> <span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">display</span><span class="pyoperator">.</span><span class="pytext">string</span>
        <span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">display</span><span class="pyoperator">.</span><span class="pytext">string</span> <span class="pyoperator">=</span> <span class="pystring">'Camera stopped\n'</span> <span class="pyoperator">+</span> <span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">display</span><span class="pyoperator">.</span><span class="pytext">string</span>

<span class="pykeyword">class</span> <span class="pytext">Camera</span><span class="pyoperator">(</span><span class="pytext">HasTraits</span><span class="pyoperator">)</span><span class="pyoperator">:</span>
    <span class="pytext">start_stop_capture</span> <span class="pyoperator">=</span> <span class="pytext">Button</span><span class="pyoperator">(</span><span class="pyoperator">)</span>
    <span class="pytext">display</span> <span class="pyoperator">=</span> <span class="pytext">Instance</span><span class="pyoperator">(</span><span class="pytext">TextDisplay</span><span class="pyoperator">)</span>
    <span class="pytext">capture_thread</span> <span class="pyoperator">=</span> <span class="pytext">Instance</span><span class="pyoperator">(</span><span class="pytext">CaptureThread</span><span class="pyoperator">)</span>

    <span class="pytext">view</span> <span class="pyoperator">=</span> <span class="pytext">View</span><span class="pyoperator">(</span> <span class="pytext">Item</span><span class="pyoperator">(</span><span class="pystring">'start_stop_capture'</span><span class="pyoperator">,</span> <span class="pytext">show_label</span><span class="pyoperator">=</span><span class="pytext">False</span> <span class="pyoperator">)</span><span class="pyoperator">)</span>

    <span class="pykeyword">def</span> <span class="pytext">_start_stop_capture_fired</span><span class="pyoperator">(</span><span class="pytext">self</span><span class="pyoperator">)</span><span class="pyoperator">:</span>
        <span class="pykeyword">if</span> <span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">capture_thread</span> <span class="pykeyword">and</span> <span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">capture_thread</span><span class="pyoperator">.</span><span class="pytext">isAlive</span><span class="pyoperator">(</span><span class="pyoperator">)</span><span class="pyoperator">:</span>
            <span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">capture_thread</span><span class="pyoperator">.</span><span class="pytext">wants_abort</span> <span class="pyoperator">=</span> <span class="pytext">True</span>
        <span class="pykeyword">else</span><span class="pyoperator">:</span>
            <span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">capture_thread</span> <span class="pyoperator">=</span> <span class="pytext">CaptureThread</span><span class="pyoperator">(</span><span class="pyoperator">)</span>
            <span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">capture_thread</span><span class="pyoperator">.</span><span class="pytext">wants_abort</span> <span class="pyoperator">=</span> <span class="pytext">False</span>
            <span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">capture_thread</span><span class="pyoperator">.</span><span class="pytext">display</span> <span class="pyoperator">=</span> <span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">display</span>
            <span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">capture_thread</span><span class="pyoperator">.</span><span class="pytext">start</span><span class="pyoperator">(</span><span class="pyoperator">)</span>

<span class="pykeyword">class</span> <span class="pytext">MainWindow</span><span class="pyoperator">(</span><span class="pytext">HasTraits</span><span class="pyoperator">)</span><span class="pyoperator">:</span>
    <span class="pytext">display</span> <span class="pyoperator">=</span> <span class="pytext">Instance</span><span class="pyoperator">(</span><span class="pytext">TextDisplay</span><span class="pyoperator">,</span> <span class="pyoperator">(</span><span class="pyoperator">)</span><span class="pyoperator">)</span>

    <span class="pytext">camera</span> <span class="pyoperator">=</span> <span class="pytext">Instance</span><span class="pyoperator">(</span><span class="pytext">Camera</span><span class="pyoperator">)</span>

    <span class="pykeyword">def</span> <span class="pytext">_camera_default</span><span class="pyoperator">(</span><span class="pytext">self</span><span class="pyoperator">)</span><span class="pyoperator">:</span>
        <span class="pykeyword">return</span> <span class="pytext">Camera</span><span class="pyoperator">(</span><span class="pytext">display</span><span class="pyoperator">=</span><span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">display</span><span class="pyoperator">)</span>

    <span class="pytext">view</span> <span class="pyoperator">=</span> <span class="pytext">View</span><span class="pyoperator">(</span><span class="pystring">'display'</span><span class="pyoperator">,</span> <span class="pystring">'camera'</span><span class="pyoperator">,</span> <span class="pytext">style</span><span class="pyoperator">=</span><span class="pystring">"custom"</span><span class="pyoperator">,</span> <span class="pytext">resizable</span><span class="pyoperator">=</span><span class="pytext">True</span><span class="pyoperator">)</span>


<span class="pykeyword">if</span> <span class="pytext">__name__</span> <span class="pyoperator">==</span> <span class="pystring">'__main__'</span><span class="pyoperator">:</span>
    <span class="pytext">MainWindow</span><span class="pyoperator">(</span><span class="pyoperator">)</span><span class="pyoperator">.</span><span class="pytext">configure_traits</span><span class="pyoperator">(</span><span class="pyoperator">)</span><span class="pytext"></span></div>
</blockquote>
<p>This creates an application with a button that starts or stop a
continuous camera acquisition loop.</p>
<blockquote>
<img alt="traits_thread.png" src="traits_thread.png" />
</blockquote>
<p>When the &quot;Start stop capture&quot; button is pressed the
<em>_start_stop_capture_fired</em> method is called. It checks to see if a
<em>CaptureThread</em> is running or not. If none is running, it starts a new
one. If one is running, it sets its <em>wants_abort</em> attribute to true.</p>
<p>The thread checks every half a second to see if its attribute
<em>wants_abort</em> has been set to true. If this is the case, it aborts. This
is a simple way of ending the thread through a GUI event.</p>
<hr class="docutils" />
<p>Using different threads lets the operations avoid blocking the user
interface, while also staying responsive to other events. In the
real-world application that serves as the basis of this tutorial, there
are 2 threads and a GUI event loop.</p>
<p>The first thread is an acquisition loop, during which the
program loops, waiting for a image to be captured on the camera (the
camera is controlled by external signals). Once the image is captured and
transfered to the computer, the acquisition thread saves it to the disk
and spawns a thread to process the data, then returns to waiting for new
data while the processing thread processes the data. Once the processing
thread is done, it displays its results (by inserting the display events
in the GUI event loop) and dies. The acquisition thread refuses to spawn
a new processing thread if there still is one running. This makes sure
that data is never lost, no matter how long the processing might be.</p>
<p>There are thus up to 3 set of instructions running concurrently: the GUI
event loop, responding to user-generated events, the acquisition loop,
responding to hardware-generated events, and the processing jobs, doing
the numerical intensive work.</p>
<p>In the next section we are going to see how to add a home-made element to
traits, in order to add new possibilities to our application.</p>
</div>
</div>
<div class="section">
<h1><a class="toc-backref" href="#id31" id="extending-traitsui-adding-a-matplotlib-figure-to-our-application" name="extending-traitsui-adding-a-matplotlib-figure-to-our-application">4&nbsp;&nbsp;&nbsp;Extending TraitsUI: Adding a matplotlib figure to our application</a></h1>
<p>This section gives a few guidelines on how to build your own traits
editor. A traits editor is the view associated to each traits that allows
that graphically edit its value. We can twist a bit the notion and simply
use it to graphically represent the attribute. This section involves a
bit of <cite>wxPython</cite> code that may be hard to understand if you do not know
<cite>wxPython</cite>, but it will bring a lot of power and flexibility to you use
of traits. The reason it appears in this tutorial is that I wanted to
insert a matplotlib in my <cite>traitsUI</cite> application. It is not necessary to
fully understand the code of this section to be able to read on.</p>
<p>I should stress that there already exists a plotting module that provides
traits editors for plotting, and that is very well integrated with
traits: chaco <a class="footnote-reference" href="#id16" id="id7" name="id7">[7]</a>.</p>
<div class="section">
<h2><a class="toc-backref" href="#id32" id="making-a-traits-editor-from-a-matplotlib-plot" name="making-a-traits-editor-from-a-matplotlib-plot">4.1&nbsp;&nbsp;&nbsp;Making a <cite>traits</cite> editor from a MatPlotLib plot</a></h2>
<p>To use traits, the developer does not need to know its internals. However
traits does not provide an editor for every need. If we want to insert a
powerful tool for plotting we have to get our hands a bit dirty and
create our own traits editor.</p>
<p>This involves some <cite>wxPython</cite> coding, as we need to translate a
<cite>wxPython</cite> object in a  by traits editor providing the corresponding API
(i.e. the standard way of building a <cite>traits</cite> editor, so that the <cite>traits</cite>
framework can do it automatically.</p>
<p>Traits editor are created by an editor factory that instanciates an
editor class and passes it the object that the editor represents in its
<em>value</em> attribute. It calls the editor <em>int()</em> method to create the <em>wx</em>
widget. Here we create a wx figure canvas from a matplotlib figure using
the matplotlib wx backend. Instead of displaying this widget, we set its
control as the <em>control</em> attribute of the editor. TraitsUI takes care of
displaying and positioning the editor.</p>
<blockquote>
<p><a class="reference" href="http://gael-varoquaux.info/computers/traits_tutorial/mpl_figure_editor.py">code snippet #8</a></p>
<div class="pysrc"><span class="pykeyword">import</span> <span class="pytext">wx</span>

<span class="pykeyword">import</span> <span class="pytext">matplotlib</span>
<span class="pycomment"># We want matplotlib to use a wxPython backend
</span><span class="pytext">matplotlib</span><span class="pyoperator">.</span><span class="pytext">use</span><span class="pyoperator">(</span><span class="pystring">'WXAgg'</span><span class="pyoperator">)</span>
<span class="pykeyword">from</span> <span class="pytext">matplotlib</span><span class="pyoperator">.</span><span class="pytext">backends</span><span class="pyoperator">.</span><span class="pytext">backend_wxagg</span> <span class="pykeyword">import</span> <span class="pytext">FigureCanvasWxAgg</span> <span class="pykeyword">as</span> <span class="pytext">FigureCanvas</span>
<span class="pykeyword">from</span> <span class="pytext">matplotlib</span><span class="pyoperator">.</span><span class="pytext">figure</span> <span class="pykeyword">import</span> <span class="pytext">Figure</span>
<span class="pykeyword">from</span> <span class="pytext">matplotlib</span><span class="pyoperator">.</span><span class="pytext">backends</span><span class="pyoperator">.</span><span class="pytext">backend_wx</span> <span class="pykeyword">import</span> <span class="pytext">NavigationToolbar2Wx</span>

<span class="pykeyword">from</span> <span class="pytext">enthought</span><span class="pyoperator">.</span><span class="pytext">traits</span><span class="pyoperator">.</span><span class="pytext">api</span> <span class="pykeyword">import</span> <span class="pytext">Any</span><span class="pyoperator">,</span> <span class="pytext">Instance</span>
<span class="pykeyword">from</span> <span class="pytext">enthought</span><span class="pyoperator">.</span><span class="pytext">traits</span><span class="pyoperator">.</span><span class="pytext">ui</span><span class="pyoperator">.</span><span class="pytext">wx</span><span class="pyoperator">.</span><span class="pytext">editor</span> <span class="pykeyword">import</span> <span class="pytext">Editor</span>
<span class="pykeyword">from</span> <span class="pytext">enthought</span><span class="pyoperator">.</span><span class="pytext">traits</span><span class="pyoperator">.</span><span class="pytext">ui</span><span class="pyoperator">.</span><span class="pytext">wx</span><span class="pyoperator">.</span><span class="pytext">basic_editor_factory</span> <span class="pykeyword">import</span> <span class="pytext">BasicEditorFactory</span>

<span class="pykeyword">class</span> <span class="pytext">_MPLFigureEditor</span><span class="pyoperator">(</span><span class="pytext">Editor</span><span class="pyoperator">)</span><span class="pyoperator">:</span>

    <span class="pytext">scrollable</span>  <span class="pyoperator">=</span> <span class="pytext">True</span>

    <span class="pykeyword">def</span> <span class="pytext">init</span><span class="pyoperator">(</span><span class="pytext">self</span><span class="pyoperator">,</span> <span class="pytext">parent</span><span class="pyoperator">)</span><span class="pyoperator">:</span>
        <span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">control</span> <span class="pyoperator">=</span> <span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">_create_canvas</span><span class="pyoperator">(</span><span class="pytext">parent</span><span class="pyoperator">)</span>
        <span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">set_tooltip</span><span class="pyoperator">(</span><span class="pyoperator">)</span>

    <span class="pykeyword">def</span> <span class="pytext">update_editor</span><span class="pyoperator">(</span><span class="pytext">self</span><span class="pyoperator">)</span><span class="pyoperator">:</span>
        <span class="pykeyword">pass</span>

    <span class="pykeyword">def</span> <span class="pytext">_create_canvas</span><span class="pyoperator">(</span><span class="pytext">self</span><span class="pyoperator">,</span> <span class="pytext">parent</span><span class="pyoperator">)</span><span class="pyoperator">:</span>
        <span class="pystring">""" Create the MPL canvas. """</span>
        <span class="pycomment"># The panel lets us add additional controls.
</span>        <span class="pytext">panel</span> <span class="pyoperator">=</span> <span class="pytext">wx</span><span class="pyoperator">.</span><span class="pytext">Panel</span><span class="pyoperator">(</span><span class="pytext">parent</span><span class="pyoperator">,</span> <span class="pyoperator">-</span><span class="pynumber">1</span><span class="pyoperator">,</span> <span class="pytext">style</span><span class="pyoperator">=</span><span class="pytext">wx</span><span class="pyoperator">.</span><span class="pytext">CLIP_CHILDREN</span><span class="pyoperator">)</span>
        <span class="pytext">sizer</span> <span class="pyoperator">=</span> <span class="pytext">wx</span><span class="pyoperator">.</span><span class="pytext">BoxSizer</span><span class="pyoperator">(</span><span class="pytext">wx</span><span class="pyoperator">.</span><span class="pytext">VERTICAL</span><span class="pyoperator">)</span>
        <span class="pytext">panel</span><span class="pyoperator">.</span><span class="pytext">SetSizer</span><span class="pyoperator">(</span><span class="pytext">sizer</span><span class="pyoperator">)</span>
        <span class="pycomment"># matplotlib commands to create a canvas
</span>        <span class="pytext">mpl_control</span> <span class="pyoperator">=</span> <span class="pytext">FigureCanvas</span><span class="pyoperator">(</span><span class="pytext">panel</span><span class="pyoperator">,</span> <span class="pyoperator">-</span><span class="pynumber">1</span><span class="pyoperator">,</span> <span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">value</span><span class="pyoperator">)</span>
        <span class="pytext">sizer</span><span class="pyoperator">.</span><span class="pytext">Add</span><span class="pyoperator">(</span><span class="pytext">mpl_control</span><span class="pyoperator">,</span> <span class="pynumber">1</span><span class="pyoperator">,</span> <span class="pytext">wx</span><span class="pyoperator">.</span><span class="pytext">LEFT</span> <span class="pyoperator">|</span> <span class="pytext">wx</span><span class="pyoperator">.</span><span class="pytext">TOP</span> <span class="pyoperator">|</span> <span class="pytext">wx</span><span class="pyoperator">.</span><span class="pytext">GROW</span><span class="pyoperator">)</span>
        <span class="pytext">toolbar</span> <span class="pyoperator">=</span> <span class="pytext">NavigationToolbar2Wx</span><span class="pyoperator">(</span><span class="pytext">mpl_control</span><span class="pyoperator">)</span>
        <span class="pytext">sizer</span><span class="pyoperator">.</span><span class="pytext">Add</span><span class="pyoperator">(</span><span class="pytext">toolbar</span><span class="pyoperator">,</span> <span class="pynumber">0</span><span class="pyoperator">,</span> <span class="pytext">wx</span><span class="pyoperator">.</span><span class="pytext">EXPAND</span><span class="pyoperator">)</span>
        <span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">value</span><span class="pyoperator">.</span><span class="pytext">canvas</span><span class="pyoperator">.</span><span class="pytext">SetMinSize</span><span class="pyoperator">(</span><span class="pyoperator">(</span><span class="pynumber">10</span><span class="pyoperator">,</span><span class="pynumber">10</span><span class="pyoperator">)</span><span class="pyoperator">)</span>
        <span class="pykeyword">return</span> <span class="pytext">panel</span>

<span class="pykeyword">class</span> <span class="pytext">MPLFigureEditor</span><span class="pyoperator">(</span><span class="pytext">BasicEditorFactory</span><span class="pyoperator">)</span><span class="pyoperator">:</span>

    <span class="pytext">klass</span> <span class="pyoperator">=</span> <span class="pytext">_MPLFigureEditor</span>


<span class="pykeyword">if</span> <span class="pytext">__name__</span> <span class="pyoperator">==</span> <span class="pystring">"__main__"</span><span class="pyoperator">:</span>
    <span class="pycomment"># Create a window to demo the editor
</span>    <span class="pykeyword">from</span> <span class="pytext">enthought</span><span class="pyoperator">.</span><span class="pytext">traits</span><span class="pyoperator">.</span><span class="pytext">api</span> <span class="pykeyword">import</span> <span class="pytext">HasTraits</span>
    <span class="pykeyword">from</span> <span class="pytext">enthought</span><span class="pyoperator">.</span><span class="pytext">traits</span><span class="pyoperator">.</span><span class="pytext">ui</span><span class="pyoperator">.</span><span class="pytext">api</span> <span class="pykeyword">import</span> <span class="pytext">View</span><span class="pyoperator">,</span> <span class="pytext">Item</span>
    <span class="pykeyword">from</span> <span class="pytext">numpy</span> <span class="pykeyword">import</span> <span class="pytext">sin</span><span class="pyoperator">,</span> <span class="pytext">cos</span><span class="pyoperator">,</span> <span class="pytext">linspace</span><span class="pyoperator">,</span> <span class="pytext">pi</span>

    <span class="pykeyword">class</span> <span class="pytext">Test</span><span class="pyoperator">(</span><span class="pytext">HasTraits</span><span class="pyoperator">)</span><span class="pyoperator">:</span>

        <span class="pytext">figure</span> <span class="pyoperator">=</span> <span class="pytext">Instance</span><span class="pyoperator">(</span><span class="pytext">Figure</span><span class="pyoperator">,</span> <span class="pyoperator">(</span><span class="pyoperator">)</span><span class="pyoperator">)</span>

        <span class="pytext">view</span> <span class="pyoperator">=</span> <span class="pytext">View</span><span class="pyoperator">(</span><span class="pytext">Item</span><span class="pyoperator">(</span><span class="pystring">'figure'</span><span class="pyoperator">,</span> <span class="pytext">editor</span><span class="pyoperator">=</span><span class="pytext">MPLFigureEditor</span><span class="pyoperator">(</span><span class="pyoperator">)</span><span class="pyoperator">,</span>
                                <span class="pytext">show_label</span><span class="pyoperator">=</span><span class="pytext">False</span><span class="pyoperator">)</span><span class="pyoperator">,</span>
                        <span class="pytext">width</span><span class="pyoperator">=</span><span class="pynumber">400</span><span class="pyoperator">,</span>
                        <span class="pytext">height</span><span class="pyoperator">=</span><span class="pynumber">300</span><span class="pyoperator">,</span>
                        <span class="pytext">resizable</span><span class="pyoperator">=</span><span class="pytext">True</span><span class="pyoperator">)</span>

        <span class="pykeyword">def</span> <span class="pytext">__init__</span><span class="pyoperator">(</span><span class="pytext">self</span><span class="pyoperator">)</span><span class="pyoperator">:</span>
            <span class="pytext">super</span><span class="pyoperator">(</span><span class="pytext">Test</span><span class="pyoperator">,</span> <span class="pytext">self</span><span class="pyoperator">)</span><span class="pyoperator">.</span><span class="pytext">__init__</span><span class="pyoperator">(</span><span class="pyoperator">)</span>
            <span class="pytext">axes</span> <span class="pyoperator">=</span> <span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">figure</span><span class="pyoperator">.</span><span class="pytext">add_subplot</span><span class="pyoperator">(</span><span class="pynumber">111</span><span class="pyoperator">)</span>
            <span class="pytext">t</span> <span class="pyoperator">=</span> <span class="pytext">linspace</span><span class="pyoperator">(</span><span class="pynumber">0</span><span class="pyoperator">,</span> <span class="pynumber">2</span><span class="pyoperator">*</span><span class="pytext">pi</span><span class="pyoperator">,</span> <span class="pynumber">200</span><span class="pyoperator">)</span>
            <span class="pytext">axes</span><span class="pyoperator">.</span><span class="pytext">plot</span><span class="pyoperator">(</span><span class="pytext">sin</span><span class="pyoperator">(</span><span class="pytext">t</span><span class="pyoperator">)</span><span class="pyoperator">*</span><span class="pyoperator">(</span><span class="pynumber">1</span><span class="pyoperator">+</span><span class="pynumber">0.5</span><span class="pyoperator">*</span><span class="pytext">cos</span><span class="pyoperator">(</span><span class="pynumber">11</span><span class="pyoperator">*</span><span class="pytext">t</span><span class="pyoperator">)</span><span class="pyoperator">)</span><span class="pyoperator">,</span> <span class="pytext">cos</span><span class="pyoperator">(</span><span class="pytext">t</span><span class="pyoperator">)</span><span class="pyoperator">*</span><span class="pyoperator">(</span><span class="pynumber">1</span><span class="pyoperator">+</span><span class="pynumber">0.5</span><span class="pyoperator">*</span><span class="pytext">cos</span><span class="pyoperator">(</span><span class="pynumber">11</span><span class="pyoperator">*</span><span class="pytext">t</span><span class="pyoperator">)</span><span class="pyoperator">)</span><span class="pyoperator">)</span>

    <span class="pytext">Test</span><span class="pyoperator">(</span><span class="pyoperator">)</span><span class="pyoperator">.</span><span class="pytext">configure_traits</span><span class="pyoperator">(</span><span class="pyoperator">)</span><span class="pytext"></span></div>
</blockquote>
<p>This code first creates a traitsUI editor for a matplotlib figure,
and then a small dialog to illustrate how it works:</p>
<blockquote>
<img alt="mpl_figure_editor.png" src="mpl_figure_editor.png" />
</blockquote>
<p>The matplotlib figure traits editor created in the above example can be
imported in a traitsUI application and combined with the power of traits.
This editor allows to insert a matplotlib figure in a traitsUI dialog. It
can be modified using reactive programming, as demonstrated in section 3
of this tutorial. However, once the dialog is up and running, you have to
call <em>self.figure.canvas.draw()</em> to update the canvas if you made
modifications to the figure. The matplotlib user guide <a class="footnote-reference" href="#id11" id="id8" name="id8">[3]</a> details how
this object can be used for plotting.</p>
</div>
</div>
<div class="section">
<h1><a class="toc-backref" href="#id33" id="putting-it-all-together-a-sample-application" name="putting-it-all-together-a-sample-application">5&nbsp;&nbsp;&nbsp;Putting it all together: a sample application</a></h1>
<p>The real world problem that motivated the writing of this tutorial is
an application that retrieves data from a camera, processes it and
displays results and controls to the user. We now have all the tools to
build such an application. This section gives the code of a skeleton of
this application. This application actually controls a camera on a
physics experiment (Bose-Einstein condensation), at the university of
Toronto.</p>
<p>The reason I am providing this code is to give an example to study of how
a full-blown application can be built. This code can be found in the
<a class="reference" href="http://gael-varoquaux.info/computers/traits_tutorial/traits_tutorial.zip">tutorial's zip file</a> (it is the file <cite>application.py</cite>).</p>
<ul class="simple">
<li>The camera will be built as an object. Its real attributes (exposure
time, gain...) will be represented as the object's attributes, and
exposed through traitsUI.</li>
<li>The continuous acquisition/processing/user-interaction will be dealt
with appropriate threads, as discussed in section 2.3.</li>
<li>The plotting of the results will be done through the MPLWidget object.</li>
</ul>
<div class="section">
<h2><a class="toc-backref" href="#id34" id="the-imports" name="the-imports">5.1&nbsp;&nbsp;&nbsp;The imports</a></h2>
<p>The MPLFigureEditor is imported from last example.</p>
<blockquote>
<div class="pysrc"><span class="pykeyword">from</span> <span class="pytext">threading</span> <span class="pykeyword">import</span> <span class="pytext">Thread</span>
<span class="pykeyword">from</span> <span class="pytext">time</span> <span class="pykeyword">import</span> <span class="pytext">sleep</span>
<span class="pykeyword">from</span> <span class="pytext">enthought</span><span class="pyoperator">.</span><span class="pytext">traits</span><span class="pyoperator">.</span><span class="pytext">api</span> <span class="pykeyword">import</span> <span class="pyoperator">*</span>
<span class="pykeyword">from</span> <span class="pytext">enthought</span><span class="pyoperator">.</span><span class="pytext">traits</span><span class="pyoperator">.</span><span class="pytext">ui</span><span class="pyoperator">.</span><span class="pytext">api</span> <span class="pykeyword">import</span> <span class="pytext">View</span><span class="pyoperator">,</span> <span class="pytext">Item</span><span class="pyoperator">,</span> <span class="pytext">Group</span><span class="pyoperator">,</span>        <span class="pytext">HSplit</span><span class="pyoperator">,</span> <span class="pytext">Handler</span>
<span class="pykeyword">from</span> <span class="pytext">enthought</span><span class="pyoperator">.</span><span class="pytext">traits</span><span class="pyoperator">.</span><span class="pytext">ui</span><span class="pyoperator">.</span><span class="pytext">menu</span> <span class="pykeyword">import</span> <span class="pytext">NoButtons</span>
<span class="pykeyword">from</span> <span class="pytext">mpl_figure_editor</span> <span class="pykeyword">import</span> <span class="pytext">MPLFigureEditor</span>
<span class="pykeyword">from</span> <span class="pytext">matplotlib</span><span class="pyoperator">.</span><span class="pytext">figure</span> <span class="pykeyword">import</span> <span class="pytext">Figure</span>
<span class="pykeyword">from</span> <span class="pytext">scipy</span> <span class="pykeyword">import</span> <span class="pyoperator">*</span>
<span class="pykeyword">import</span> <span class="pytext">wx</span><span class="pytext"></span></div>
</blockquote>
</div>
<div class="section">
<h2><a class="toc-backref" href="#id35" id="user-interface-objects" name="user-interface-objects">5.2&nbsp;&nbsp;&nbsp;User interface objects</a></h2>
<p>These objects store information for the program to interact with the
user via traitsUI.</p>
<blockquote>
<div class="pysrc"><span class="pykeyword">class</span> <span class="pytext">Experiment</span><span class="pyoperator">(</span><span class="pytext">HasTraits</span><span class="pyoperator">)</span><span class="pyoperator">:</span>
    <span class="pystring">""" Object that contains the parameters that control the experiment,
        modified by the user.
    """</span>
    <span class="pytext">width</span> <span class="pyoperator">=</span> <span class="pytext">Float</span><span class="pyoperator">(</span><span class="pynumber">30</span><span class="pyoperator">,</span> <span class="pytext">label</span><span class="pyoperator">=</span><span class="pystring">"Width"</span><span class="pyoperator">,</span> <span class="pytext">desc</span><span class="pyoperator">=</span><span class="pystring">"width of the cloud"</span><span class="pyoperator">)</span>
    <span class="pytext">x</span> <span class="pyoperator">=</span> <span class="pytext">Float</span><span class="pyoperator">(</span><span class="pynumber">50</span><span class="pyoperator">,</span> <span class="pytext">label</span><span class="pyoperator">=</span><span class="pystring">"X"</span><span class="pyoperator">,</span> <span class="pytext">desc</span><span class="pyoperator">=</span><span class="pystring">"X position of the center"</span><span class="pyoperator">)</span>
    <span class="pytext">y</span> <span class="pyoperator">=</span> <span class="pytext">Float</span><span class="pyoperator">(</span><span class="pynumber">50</span><span class="pyoperator">,</span> <span class="pytext">label</span><span class="pyoperator">=</span><span class="pystring">"Y"</span><span class="pyoperator">,</span> <span class="pytext">desc</span><span class="pyoperator">=</span><span class="pystring">"Y position of the center"</span><span class="pyoperator">)</span>


<span class="pykeyword">class</span> <span class="pytext">Results</span><span class="pyoperator">(</span><span class="pytext">HasTraits</span><span class="pyoperator">)</span><span class="pyoperator">:</span>
    <span class="pystring">""" Object used to display the results.
    """</span>
    <span class="pytext">width</span> <span class="pyoperator">=</span> <span class="pytext">Float</span><span class="pyoperator">(</span><span class="pynumber">30</span><span class="pyoperator">,</span> <span class="pytext">label</span><span class="pyoperator">=</span><span class="pystring">"Width"</span><span class="pyoperator">,</span> <span class="pytext">desc</span><span class="pyoperator">=</span><span class="pystring">"width of the cloud"</span><span class="pyoperator">)</span>
    <span class="pytext">x</span> <span class="pyoperator">=</span> <span class="pytext">Float</span><span class="pyoperator">(</span><span class="pynumber">50</span><span class="pyoperator">,</span> <span class="pytext">label</span><span class="pyoperator">=</span><span class="pystring">"X"</span><span class="pyoperator">,</span> <span class="pytext">desc</span><span class="pyoperator">=</span><span class="pystring">"X position of the center"</span><span class="pyoperator">)</span>
    <span class="pytext">y</span> <span class="pyoperator">=</span> <span class="pytext">Float</span><span class="pyoperator">(</span><span class="pynumber">50</span><span class="pyoperator">,</span> <span class="pytext">label</span><span class="pyoperator">=</span><span class="pystring">"Y"</span><span class="pyoperator">,</span> <span class="pytext">desc</span><span class="pyoperator">=</span><span class="pystring">"Y position of the center"</span><span class="pyoperator">)</span>

    <span class="pytext">view</span> <span class="pyoperator">=</span> <span class="pytext">View</span><span class="pyoperator">(</span> <span class="pytext">Item</span><span class="pyoperator">(</span><span class="pystring">'width'</span><span class="pyoperator">,</span> <span class="pytext">style</span><span class="pyoperator">=</span><span class="pystring">'readonly'</span><span class="pyoperator">)</span><span class="pyoperator">,</span>
                 <span class="pytext">Item</span><span class="pyoperator">(</span><span class="pystring">'x'</span><span class="pyoperator">,</span> <span class="pytext">style</span><span class="pyoperator">=</span><span class="pystring">'readonly'</span><span class="pyoperator">)</span><span class="pyoperator">,</span>
                 <span class="pytext">Item</span><span class="pyoperator">(</span><span class="pystring">'y'</span><span class="pyoperator">,</span> <span class="pytext">style</span><span class="pyoperator">=</span><span class="pystring">'readonly'</span><span class="pyoperator">)</span><span class="pyoperator">,</span>
               <span class="pyoperator">)</span><span class="pytext"></span></div>
</blockquote>
<p>The camera object also is a real object, and not only a data
structure: it has a method to acquire an image (or in our case
simulate acquiring), using its attributes as parameters for the
acquisition.</p>
<blockquote>
<div class="pysrc"><span class="pykeyword">class</span> <span class="pytext">Camera</span><span class="pyoperator">(</span><span class="pytext">HasTraits</span><span class="pyoperator">)</span><span class="pyoperator">:</span>
    <span class="pystring">""" Camera objects. Implements both the camera parameters controls, and
        the picture acquisition.
    """</span>
    <span class="pytext">exposure</span> <span class="pyoperator">=</span> <span class="pytext">Float</span><span class="pyoperator">(</span><span class="pynumber">1</span><span class="pyoperator">,</span> <span class="pytext">label</span><span class="pyoperator">=</span><span class="pystring">"Exposure"</span><span class="pyoperator">,</span> <span class="pytext">desc</span><span class="pyoperator">=</span><span class="pystring">"exposure, in ms"</span><span class="pyoperator">)</span>
    <span class="pytext">gain</span> <span class="pyoperator">=</span> <span class="pytext">Enum</span><span class="pyoperator">(</span><span class="pynumber">1</span><span class="pyoperator">,</span> <span class="pynumber">2</span><span class="pyoperator">,</span> <span class="pynumber">3</span><span class="pyoperator">,</span> <span class="pytext">label</span><span class="pyoperator">=</span><span class="pystring">"Gain"</span><span class="pyoperator">,</span> <span class="pytext">desc</span><span class="pyoperator">=</span><span class="pystring">"gain"</span><span class="pyoperator">)</span>

    <span class="pykeyword">def</span> <span class="pytext">acquire</span><span class="pyoperator">(</span><span class="pytext">self</span><span class="pyoperator">,</span> <span class="pytext">experiment</span><span class="pyoperator">)</span><span class="pyoperator">:</span>
       <span class="pytext">X</span><span class="pyoperator">,</span> <span class="pytext">Y</span> <span class="pyoperator">=</span> <span class="pytext">indices</span><span class="pyoperator">(</span><span class="pyoperator">(</span><span class="pynumber">100</span><span class="pyoperator">,</span> <span class="pynumber">100</span><span class="pyoperator">)</span><span class="pyoperator">)</span>
       <span class="pytext">Z</span> <span class="pyoperator">=</span> <span class="pytext">exp</span><span class="pyoperator">(</span><span class="pyoperator">-</span><span class="pyoperator">(</span><span class="pyoperator">(</span><span class="pytext">X</span><span class="pyoperator">-</span><span class="pytext">experiment</span><span class="pyoperator">.</span><span class="pytext">x</span><span class="pyoperator">)</span><span class="pyoperator">**</span><span class="pynumber">2</span><span class="pyoperator">+</span><span class="pyoperator">(</span><span class="pytext">Y</span><span class="pyoperator">-</span><span class="pytext">experiment</span><span class="pyoperator">.</span><span class="pytext">y</span><span class="pyoperator">)</span><span class="pyoperator">**</span><span class="pynumber">2</span><span class="pyoperator">)</span><span class="pyoperator">/</span><span class="pytext">experiment</span><span class="pyoperator">.</span><span class="pytext">width</span><span class="pyoperator">**</span><span class="pynumber">2</span><span class="pyoperator">)</span>
       <span class="pytext">Z</span> <span class="pyoperator">+=</span> <span class="pynumber">1</span><span class="pyoperator">-</span><span class="pynumber">2</span><span class="pyoperator">*</span><span class="pytext">rand</span><span class="pyoperator">(</span><span class="pynumber">100</span><span class="pyoperator">,</span><span class="pynumber">100</span><span class="pyoperator">)</span>
       <span class="pytext">Z</span> <span class="pyoperator">*=</span> <span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">exposure</span>
       <span class="pytext">Z</span><span class="pyoperator">[</span><span class="pytext">Z</span><span class="pyoperator">&gt;</span><span class="pynumber">2</span><span class="pyoperator">]</span> <span class="pyoperator">=</span> <span class="pynumber">2</span>
       <span class="pytext">Z</span> <span class="pyoperator">=</span> <span class="pytext">Z</span><span class="pyoperator">**</span><span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">gain</span>
       <span class="pykeyword">return</span><span class="pyoperator">(</span><span class="pytext">Z</span><span class="pyoperator">)</span><span class="pytext"></span></div>
</blockquote>
</div>
<div class="section">
<h2><a class="toc-backref" href="#id36" id="threads-and-flow-control" name="threads-and-flow-control">5.3&nbsp;&nbsp;&nbsp;Threads and flow control</a></h2>
<p>There are three threads in this application:</p>
<blockquote>
<ul>
<li><p class="first">The GUI event loop, the only thread running at the start of the program.</p>
</li>
<li><p class="first">The acquisition thread, started through the GUI. This thread is an
infinite loop that waits for the camera to be triggered, retrieves the
images, displays them, and spawns the processing thread for each image
recieved.</p>
</li>
<li><p class="first">The processing thread, started by the acquisition thread. This thread
is responsible for the numerical intensive work of the application.
it processes the data and displays the results. It dies when it is done.
One processing thread runs per shot acquired on the camera, but to avoid
accumulation of threads in the case that the processing takes longer than
the time lapse between two images, the acquisition thread checks that the
processing thread is done before spawning a new one.</p>
<blockquote>
<div class="pysrc"><span class="pykeyword">def</span> <span class="pytext">process</span><span class="pyoperator">(</span><span class="pytext">image</span><span class="pyoperator">,</span> <span class="pytext">results_obj</span><span class="pyoperator">)</span><span class="pyoperator">:</span>
    <span class="pystring">""" Function called to do the processing """</span>
    <span class="pytext">X</span><span class="pyoperator">,</span> <span class="pytext">Y</span> <span class="pyoperator">=</span> <span class="pytext">indices</span><span class="pyoperator">(</span><span class="pytext">image</span><span class="pyoperator">.</span><span class="pytext">shape</span><span class="pyoperator">)</span>
    <span class="pytext">x</span> <span class="pyoperator">=</span> <span class="pytext">sum</span><span class="pyoperator">(</span><span class="pytext">X</span><span class="pyoperator">*</span><span class="pytext">image</span><span class="pyoperator">)</span><span class="pyoperator">/</span><span class="pytext">sum</span><span class="pyoperator">(</span><span class="pytext">image</span><span class="pyoperator">)</span>
    <span class="pytext">y</span> <span class="pyoperator">=</span> <span class="pytext">sum</span><span class="pyoperator">(</span><span class="pytext">Y</span><span class="pyoperator">*</span><span class="pytext">image</span><span class="pyoperator">)</span><span class="pyoperator">/</span><span class="pytext">sum</span><span class="pyoperator">(</span><span class="pytext">image</span><span class="pyoperator">)</span>
    <span class="pytext">width</span> <span class="pyoperator">=</span> <span class="pytext">sqrt</span><span class="pyoperator">(</span><span class="pytext">abs</span><span class="pyoperator">(</span><span class="pytext">sum</span><span class="pyoperator">(</span><span class="pyoperator">(</span><span class="pyoperator">(</span><span class="pytext">X</span><span class="pyoperator">-</span><span class="pytext">x</span><span class="pyoperator">)</span><span class="pyoperator">**</span><span class="pynumber">2</span><span class="pyoperator">+</span><span class="pyoperator">(</span><span class="pytext">Y</span><span class="pyoperator">-</span><span class="pytext">y</span><span class="pyoperator">)</span><span class="pyoperator">**</span><span class="pynumber">2</span><span class="pyoperator">)</span><span class="pyoperator">*</span><span class="pytext">image</span><span class="pyoperator">)</span><span class="pyoperator">/</span><span class="pytext">sum</span><span class="pyoperator">(</span><span class="pytext">image</span><span class="pyoperator">)</span><span class="pyoperator">)</span><span class="pyoperator">)</span>
    <span class="pytext">results_obj</span><span class="pyoperator">.</span><span class="pytext">x</span> <span class="pyoperator">=</span> <span class="pytext">x</span>
    <span class="pytext">results_obj</span><span class="pyoperator">.</span><span class="pytext">y</span> <span class="pyoperator">=</span> <span class="pytext">y</span>
    <span class="pytext">results_obj</span><span class="pyoperator">.</span><span class="pytext">width</span> <span class="pyoperator">=</span> <span class="pytext">width</span>

<span class="pykeyword">class</span> <span class="pytext">AcquisitionThread</span><span class="pyoperator">(</span><span class="pytext">Thread</span><span class="pyoperator">)</span><span class="pyoperator">:</span>
    <span class="pystring">""" Acquisition loop. This is the worker thread that retrieves images
        from the camera, displays them, and spawns the processing job.
    """</span>
    <span class="pytext">wants_abort</span> <span class="pyoperator">=</span> <span class="pytext">False</span>

    <span class="pykeyword">def</span> <span class="pytext">process</span><span class="pyoperator">(</span><span class="pytext">self</span><span class="pyoperator">,</span> <span class="pytext">image</span><span class="pyoperator">)</span><span class="pyoperator">:</span>
        <span class="pystring">""" Spawns the processing job.
        """</span>
        <span class="pykeyword">try</span><span class="pyoperator">:</span>
            <span class="pykeyword">if</span> <span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">processing_job</span><span class="pyoperator">.</span><span class="pytext">isAlive</span><span class="pyoperator">(</span><span class="pyoperator">)</span><span class="pyoperator">:</span>
                <span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">display</span><span class="pyoperator">(</span><span class="pystring">"Processing to slow"</span><span class="pyoperator">)</span>
                <span class="pykeyword">return</span>
        <span class="pykeyword">except</span> <span class="pytext">AttributeError</span><span class="pyoperator">:</span>
            <span class="pykeyword">pass</span>
        <span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">processing_job</span> <span class="pyoperator">=</span> <span class="pytext">Thread</span><span class="pyoperator">(</span><span class="pytext">target</span><span class="pyoperator">=</span><span class="pytext">process</span><span class="pyoperator">,</span> <span class="pytext">args</span><span class="pyoperator">=</span><span class="pyoperator">(</span><span class="pytext">image</span><span class="pyoperator">,</span>
                                                            <span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">results</span><span class="pyoperator">)</span><span class="pyoperator">)</span>
        <span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">processing_job</span><span class="pyoperator">.</span><span class="pytext">start</span><span class="pyoperator">(</span><span class="pyoperator">)</span>

    <span class="pykeyword">def</span> <span class="pytext">run</span><span class="pyoperator">(</span><span class="pytext">self</span><span class="pyoperator">)</span><span class="pyoperator">:</span>
        <span class="pystring">""" Runs the acquisition loop.
        """</span>
        <span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">display</span><span class="pyoperator">(</span><span class="pystring">'Camera started'</span><span class="pyoperator">)</span>
        <span class="pytext">n_img</span> <span class="pyoperator">=</span> <span class="pynumber">0</span>
        <span class="pykeyword">while</span> <span class="pykeyword">not</span> <span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">wants_abort</span><span class="pyoperator">:</span>
            <span class="pytext">n_img</span> <span class="pyoperator">+=</span> <span class="pynumber">1</span>
            <span class="pytext">img</span> <span class="pyoperator">=</span><span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">acquire</span><span class="pyoperator">(</span><span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">experiment</span><span class="pyoperator">)</span>
            <span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">display</span><span class="pyoperator">(</span><span class="pystring">'%d image captured'</span> <span class="pyoperator">%</span> <span class="pytext">n_img</span><span class="pyoperator">)</span>
            <span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">image_show</span><span class="pyoperator">(</span><span class="pytext">img</span><span class="pyoperator">)</span>
            <span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">process</span><span class="pyoperator">(</span><span class="pytext">img</span><span class="pyoperator">)</span>
            <span class="pytext">sleep</span><span class="pyoperator">(</span><span class="pynumber">1</span><span class="pyoperator">)</span>
        <span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">display</span><span class="pyoperator">(</span><span class="pystring">'Camera stopped'</span><span class="pyoperator">)</span><span class="pytext"></span></div>
</blockquote>
</li>
</ul>
</blockquote>
</div>
<div class="section">
<h2><a class="toc-backref" href="#id37" id="the-gui-elements" name="the-gui-elements">5.4&nbsp;&nbsp;&nbsp;The GUI elements</a></h2>
<p>The GUI of this application is separated in two (and thus created by a
sub-class of <em>SplitApplicationWindow</em>).</p>
<p>On the left a plotting area, made of an MPL figure, and its editor, displays
the images acquired by the camera.</p>
<p>On the right a panel hosts the <cite>TraitsUI</cite> representation of a <em>ControlPanel</em>
object. This object is mainly a container for our other objects, but it also
has an <em>Button</em> for starting or stopping the acquisition, and a string
(represented by a textbox) to display informations on the acquisition
process. The view attribute is tweaked to produce a pleasant and usable
dialog. Tabs are used as it help the display to be light and clear.</p>
<blockquote>
<div class="pysrc"><span class="pykeyword">class</span> <span class="pytext">ControlPanel</span><span class="pyoperator">(</span><span class="pytext">HasTraits</span><span class="pyoperator">)</span><span class="pyoperator">:</span>
    <span class="pystring">""" This object is the core of the traitsUI interface. Its view is
        the right panel of the application, and it hosts the method for
        interaction between the objects and the GUI.
    """</span>
    <span class="pytext">experiment</span> <span class="pyoperator">=</span> <span class="pytext">Instance</span><span class="pyoperator">(</span><span class="pytext">Experiment</span><span class="pyoperator">,</span> <span class="pyoperator">(</span><span class="pyoperator">)</span><span class="pyoperator">)</span>
    <span class="pytext">camera</span> <span class="pyoperator">=</span> <span class="pytext">Instance</span><span class="pyoperator">(</span><span class="pytext">Camera</span><span class="pyoperator">,</span> <span class="pyoperator">(</span><span class="pyoperator">)</span><span class="pyoperator">)</span>
    <span class="pytext">figure</span> <span class="pyoperator">=</span> <span class="pytext">Instance</span><span class="pyoperator">(</span><span class="pytext">Figure</span><span class="pyoperator">)</span>
    <span class="pytext">results</span> <span class="pyoperator">=</span> <span class="pytext">Instance</span><span class="pyoperator">(</span><span class="pytext">Results</span><span class="pyoperator">,</span> <span class="pyoperator">(</span><span class="pyoperator">)</span><span class="pyoperator">)</span>
    <span class="pytext">start_stop_acquisition</span> <span class="pyoperator">=</span> <span class="pytext">Button</span><span class="pyoperator">(</span><span class="pystring">"Start/Stop acquisition"</span><span class="pyoperator">)</span>
    <span class="pytext">results_string</span> <span class="pyoperator">=</span>  <span class="pytext">String</span><span class="pyoperator">(</span><span class="pyoperator">)</span>
    <span class="pytext">acquisition_thread</span> <span class="pyoperator">=</span> <span class="pytext">Instance</span><span class="pyoperator">(</span><span class="pytext">AcquisitionThread</span><span class="pyoperator">)</span>
    <span class="pytext">view</span> <span class="pyoperator">=</span> <span class="pytext">View</span><span class="pyoperator">(</span><span class="pytext">Group</span><span class="pyoperator">(</span>
                <span class="pytext">Group</span><span class="pyoperator">(</span>
                  <span class="pytext">Item</span><span class="pyoperator">(</span><span class="pystring">'start_stop_acquisition'</span><span class="pyoperator">,</span> <span class="pytext">show_label</span><span class="pyoperator">=</span><span class="pytext">False</span> <span class="pyoperator">)</span><span class="pyoperator">,</span>
                  <span class="pytext">Item</span><span class="pyoperator">(</span><span class="pystring">'results_string'</span><span class="pyoperator">,</span><span class="pytext">show_label</span><span class="pyoperator">=</span><span class="pytext">False</span><span class="pyoperator">,</span>
                                        <span class="pytext">springy</span><span class="pyoperator">=</span><span class="pytext">True</span><span class="pyoperator">,</span> <span class="pytext">style</span><span class="pyoperator">=</span><span class="pystring">'custom'</span> <span class="pyoperator">)</span><span class="pyoperator">,</span>
                  <span class="pytext">label</span><span class="pyoperator">=</span><span class="pystring">"Control"</span><span class="pyoperator">,</span> <span class="pytext">dock</span><span class="pyoperator">=</span><span class="pystring">'tab'</span><span class="pyoperator">,</span><span class="pyoperator">)</span><span class="pyoperator">,</span>
                <span class="pytext">Group</span><span class="pyoperator">(</span>
                  <span class="pytext">Group</span><span class="pyoperator">(</span>
                    <span class="pytext">Item</span><span class="pyoperator">(</span><span class="pystring">'experiment'</span><span class="pyoperator">,</span> <span class="pytext">style</span><span class="pyoperator">=</span><span class="pystring">'custom'</span><span class="pyoperator">,</span> <span class="pytext">show_label</span><span class="pyoperator">=</span><span class="pytext">False</span><span class="pyoperator">)</span><span class="pyoperator">,</span>
                    <span class="pytext">label</span><span class="pyoperator">=</span><span class="pystring">"Input"</span><span class="pyoperator">,</span><span class="pyoperator">)</span><span class="pyoperator">,</span>
                  <span class="pytext">Group</span><span class="pyoperator">(</span>
                    <span class="pytext">Item</span><span class="pyoperator">(</span><span class="pystring">'results'</span><span class="pyoperator">,</span> <span class="pytext">style</span><span class="pyoperator">=</span><span class="pystring">'custom'</span><span class="pyoperator">,</span> <span class="pytext">show_label</span><span class="pyoperator">=</span><span class="pytext">False</span><span class="pyoperator">)</span><span class="pyoperator">,</span>
                    <span class="pytext">label</span><span class="pyoperator">=</span><span class="pystring">"Results"</span><span class="pyoperator">,</span><span class="pyoperator">)</span><span class="pyoperator">,</span>
                <span class="pytext">label</span><span class="pyoperator">=</span><span class="pystring">'Experiment'</span><span class="pyoperator">,</span> <span class="pytext">dock</span><span class="pyoperator">=</span><span class="pystring">"tab"</span><span class="pyoperator">)</span><span class="pyoperator">,</span>
                <span class="pytext">Item</span><span class="pyoperator">(</span><span class="pystring">'camera'</span><span class="pyoperator">,</span> <span class="pytext">style</span><span class="pyoperator">=</span><span class="pystring">'custom'</span><span class="pyoperator">,</span> <span class="pytext">show_label</span><span class="pyoperator">=</span><span class="pytext">False</span><span class="pyoperator">,</span>
                                    <span class="pytext">dock</span><span class="pyoperator">=</span><span class="pystring">"tab"</span><span class="pyoperator">)</span><span class="pyoperator">,</span>
               <span class="pytext">layout</span><span class="pyoperator">=</span><span class="pystring">'tabbed'</span><span class="pyoperator">)</span><span class="pyoperator">,</span>
               <span class="pyoperator">)</span>

    <span class="pykeyword">def</span> <span class="pytext">_start_stop_acquisition_fired</span><span class="pyoperator">(</span><span class="pytext">self</span><span class="pyoperator">)</span><span class="pyoperator">:</span>
        <span class="pystring">""" Callback of the "start stop acquisition" button. This starts
            the acquisition thread, or kills it/
        """</span>
        <span class="pykeyword">if</span> <span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">acquisition_thread</span> <span class="pykeyword">and</span> <span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">acquisition_thread</span><span class="pyoperator">.</span><span class="pytext">isAlive</span><span class="pyoperator">(</span><span class="pyoperator">)</span><span class="pyoperator">:</span>
            <span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">acquisition_thread</span><span class="pyoperator">.</span><span class="pytext">wants_abort</span> <span class="pyoperator">=</span> <span class="pytext">True</span>
        <span class="pykeyword">else</span><span class="pyoperator">:</span>
            <span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">acquisition_thread</span> <span class="pyoperator">=</span> <span class="pytext">AcquisitionThread</span><span class="pyoperator">(</span><span class="pyoperator">)</span>
            <span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">acquisition_thread</span><span class="pyoperator">.</span><span class="pytext">display</span> <span class="pyoperator">=</span> <span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">add_line</span>
            <span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">acquisition_thread</span><span class="pyoperator">.</span><span class="pytext">acquire</span> <span class="pyoperator">=</span> <span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">camera</span><span class="pyoperator">.</span><span class="pytext">acquire</span>
            <span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">acquisition_thread</span><span class="pyoperator">.</span><span class="pytext">experiment</span> <span class="pyoperator">=</span> <span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">experiment</span>
            <span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">acquisition_thread</span><span class="pyoperator">.</span><span class="pytext">image_show</span> <span class="pyoperator">=</span> <span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">image_show</span>
            <span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">acquisition_thread</span><span class="pyoperator">.</span><span class="pytext">results</span> <span class="pyoperator">=</span> <span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">results</span>
            <span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">acquisition_thread</span><span class="pyoperator">.</span><span class="pytext">start</span><span class="pyoperator">(</span><span class="pyoperator">)</span>

    <span class="pykeyword">def</span> <span class="pytext">add_line</span><span class="pyoperator">(</span><span class="pytext">self</span><span class="pyoperator">,</span> <span class="pytext">string</span><span class="pyoperator">)</span><span class="pyoperator">:</span>
        <span class="pystring">""" Adds a line to the textbox display.
        """</span>
        <span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">results_string</span> <span class="pyoperator">=</span> <span class="pyoperator">(</span><span class="pytext">string</span> <span class="pyoperator">+</span> <span class="pystring">"\n"</span> <span class="pyoperator">+</span> <span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">results_string</span><span class="pyoperator">)</span><span class="pyoperator">[</span><span class="pynumber">0</span><span class="pyoperator">:</span><span class="pynumber">1000</span><span class="pyoperator">]</span>

    <span class="pykeyword">def</span> <span class="pytext">image_show</span><span class="pyoperator">(</span><span class="pytext">self</span><span class="pyoperator">,</span> <span class="pytext">image</span><span class="pyoperator">)</span><span class="pyoperator">:</span>
        <span class="pystring">""" Plots an image on the canvas in a thread safe way.
        """</span>
        <span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">figure</span><span class="pyoperator">.</span><span class="pytext">axes</span><span class="pyoperator">[</span><span class="pynumber">0</span><span class="pyoperator">]</span><span class="pyoperator">.</span><span class="pytext">images</span><span class="pyoperator">=</span><span class="pyoperator">[</span><span class="pyoperator">]</span>
        <span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">figure</span><span class="pyoperator">.</span><span class="pytext">axes</span><span class="pyoperator">[</span><span class="pynumber">0</span><span class="pyoperator">]</span><span class="pyoperator">.</span><span class="pytext">imshow</span><span class="pyoperator">(</span><span class="pytext">image</span><span class="pyoperator">,</span> <span class="pytext">aspect</span><span class="pyoperator">=</span><span class="pystring">'auto'</span><span class="pyoperator">)</span>
        <span class="pytext">wx</span><span class="pyoperator">.</span><span class="pytext">CallAfter</span><span class="pyoperator">(</span><span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">figure</span><span class="pyoperator">.</span><span class="pytext">canvas</span><span class="pyoperator">.</span><span class="pytext">draw</span><span class="pyoperator">)</span>

<span class="pykeyword">class</span> <span class="pytext">MainWindowHandler</span><span class="pyoperator">(</span><span class="pytext">Handler</span><span class="pyoperator">)</span><span class="pyoperator">:</span>
    <span class="pykeyword">def</span> <span class="pytext">close</span><span class="pyoperator">(</span><span class="pytext">self</span><span class="pyoperator">,</span> <span class="pytext">info</span><span class="pyoperator">,</span> <span class="pytext">is_OK</span><span class="pyoperator">)</span><span class="pyoperator">:</span>
        <span class="pykeyword">if</span> <span class="pyoperator">(</span> <span class="pytext">info</span><span class="pyoperator">.</span><span class="pytext">object</span><span class="pyoperator">.</span><span class="pytext">panel</span><span class="pyoperator">.</span><span class="pytext">acquisition_thread</span>
                        <span class="pykeyword">and</span> <span class="pytext">info</span><span class="pyoperator">.</span><span class="pytext">object</span><span class="pyoperator">.</span><span class="pytext">panel</span><span class="pyoperator">.</span><span class="pytext">acquisition_thread</span><span class="pyoperator">.</span><span class="pytext">isAlive</span><span class="pyoperator">(</span><span class="pyoperator">)</span> <span class="pyoperator">)</span><span class="pyoperator">:</span>
            <span class="pytext">info</span><span class="pyoperator">.</span><span class="pytext">object</span><span class="pyoperator">.</span><span class="pytext">panel</span><span class="pyoperator">.</span><span class="pytext">acquisition_thread</span><span class="pyoperator">.</span><span class="pytext">wants_abort</span> <span class="pyoperator">=</span> <span class="pytext">True</span>
            <span class="pykeyword">while</span> <span class="pytext">info</span><span class="pyoperator">.</span><span class="pytext">object</span><span class="pyoperator">.</span><span class="pytext">panel</span><span class="pyoperator">.</span><span class="pytext">acquisition_thread</span><span class="pyoperator">.</span><span class="pytext">isAlive</span><span class="pyoperator">(</span><span class="pyoperator">)</span><span class="pyoperator">:</span>
                <span class="pytext">sleep</span><span class="pyoperator">(</span><span class="pynumber">0.1</span><span class="pyoperator">)</span>
            <span class="pytext">wx</span><span class="pyoperator">.</span><span class="pytext">Yield</span><span class="pyoperator">(</span><span class="pyoperator">)</span>
        <span class="pykeyword">return</span> <span class="pytext">True</span>


<span class="pykeyword">class</span> <span class="pytext">MainWindow</span><span class="pyoperator">(</span><span class="pytext">HasTraits</span><span class="pyoperator">)</span><span class="pyoperator">:</span>
    <span class="pystring">""" The main window, here go the instructions to create and destroy
        the application.
    """</span>
    <span class="pytext">figure</span> <span class="pyoperator">=</span> <span class="pytext">Instance</span><span class="pyoperator">(</span><span class="pytext">Figure</span><span class="pyoperator">)</span>

    <span class="pytext">panel</span> <span class="pyoperator">=</span> <span class="pytext">Instance</span><span class="pyoperator">(</span><span class="pytext">ControlPanel</span><span class="pyoperator">)</span>

    <span class="pykeyword">def</span> <span class="pytext">_figure_default</span><span class="pyoperator">(</span><span class="pytext">self</span><span class="pyoperator">)</span><span class="pyoperator">:</span>
        <span class="pytext">figure</span> <span class="pyoperator">=</span> <span class="pytext">Figure</span><span class="pyoperator">(</span><span class="pyoperator">)</span>
        <span class="pytext">figure</span><span class="pyoperator">.</span><span class="pytext">add_axes</span><span class="pyoperator">(</span><span class="pyoperator">[</span><span class="pynumber">0.05</span><span class="pyoperator">,</span> <span class="pynumber">0.04</span><span class="pyoperator">,</span> <span class="pynumber">0.9</span><span class="pyoperator">,</span> <span class="pynumber">0.92</span><span class="pyoperator">]</span><span class="pyoperator">)</span>
        <span class="pykeyword">return</span> <span class="pytext">figure</span>

    <span class="pykeyword">def</span> <span class="pytext">_panel_default</span><span class="pyoperator">(</span><span class="pytext">self</span><span class="pyoperator">)</span><span class="pyoperator">:</span>
        <span class="pykeyword">return</span> <span class="pytext">ControlPanel</span><span class="pyoperator">(</span><span class="pytext">figure</span><span class="pyoperator">=</span><span class="pytext">self</span><span class="pyoperator">.</span><span class="pytext">figure</span><span class="pyoperator">)</span>

    <span class="pytext">view</span> <span class="pyoperator">=</span> <span class="pytext">View</span><span class="pyoperator">(</span><span class="pytext">HSplit</span><span class="pyoperator">(</span>  <span class="pytext">Item</span><span class="pyoperator">(</span><span class="pystring">'figure'</span><span class="pyoperator">,</span>  <span class="pytext">editor</span><span class="pyoperator">=</span><span class="pytext">MPLFigureEditor</span><span class="pyoperator">(</span><span class="pyoperator">)</span><span class="pyoperator">,</span>
                                                        <span class="pytext">dock</span><span class="pyoperator">=</span><span class="pystring">'vertical'</span><span class="pyoperator">)</span><span class="pyoperator">,</span>
                        <span class="pytext">Item</span><span class="pyoperator">(</span><span class="pystring">'panel'</span><span class="pyoperator">,</span> <span class="pytext">style</span><span class="pyoperator">=</span><span class="pystring">"custom"</span><span class="pyoperator">)</span><span class="pyoperator">,</span>
                    <span class="pytext">show_labels</span><span class="pyoperator">=</span><span class="pytext">False</span><span class="pyoperator">,</span>
                    <span class="pyoperator">)</span><span class="pyoperator">,</span>
                <span class="pytext">resizable</span><span class="pyoperator">=</span><span class="pytext">True</span><span class="pyoperator">,</span>
                <span class="pytext">height</span><span class="pyoperator">=</span><span class="pynumber">0.75</span><span class="pyoperator">,</span> <span class="pytext">width</span><span class="pyoperator">=</span><span class="pynumber">0.75</span><span class="pyoperator">,</span>
                <span class="pytext">handler</span><span class="pyoperator">=</span><span class="pytext">MainWindowHandler</span><span class="pyoperator">(</span><span class="pyoperator">)</span><span class="pyoperator">,</span>
                <span class="pytext">buttons</span><span class="pyoperator">=</span><span class="pytext">NoButtons</span><span class="pyoperator">)</span>


<span class="pykeyword">if</span> <span class="pytext">__name__</span> <span class="pyoperator">==</span> <span class="pystring">'__main__'</span><span class="pyoperator">:</span>
    <span class="pytext">MainWindow</span><span class="pyoperator">(</span><span class="pyoperator">)</span><span class="pyoperator">.</span><span class="pytext">configure_traits</span><span class="pyoperator">(</span><span class="pyoperator">)</span><span class="pytext"></span></div>
</blockquote>
<p>When the acquisition loop is created and running, the mock camera object
produces noisy gaussian images, and the processing code estimates the
parameters of the gaussian.</p>
<p>Here are screenshots of the three different tabs of the application:</p>
<blockquote>
<img alt="application1.png" src="application1.png" />
<img alt="application2.png" src="application2.png" />
<img alt="application3.png" src="application3.png" />
</blockquote>
<hr class="docutils" />
<p><strong>Conclusion</strong></p>
<p>I have summarized here all what most scientists need to learn in order to
be able to start building applications with traitsUI. Using the traitsUI
module to its full power requires you to move away from the procedural
type of programming most scientists are used to, and think more in terms
of objects and flow of information and control between them. I have found
that this paradigm shift, although a bit hard, has been incredibly
rewarding in terms of my own productivity and my ability to write compact
and readable code.</p>
<p>Good luck!</p>
<hr class="docutils" />
<p><strong>Acknowledgments</strong></p>
<p>I would like to thank the people on the enthought-dev mailing-list,
especially Prabhu Ramachandran and David Morrill, for all the help they
gave me, and Janet Swisher for reviewing this document. Big thanks go to
enthought for developing the traits and traitsUI modules, and making them
open-source. Finally the python, the numpy, and the matplotlib community
deserve many thanks for both writing such great software, and being so
helpful on the mailing lists.</p>
<hr class="docutils" />
<p><strong>References</strong></p>
<table class="docutils footnote" frame="void" id="id9" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1" name="id9">[1]</a></td><td>python tutorial: <a class="reference" href="http://docs.python.org/tut/tut.html">http://docs.python.org/tut/tut.html</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id10" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2" name="id10">[2]</a></td><td>The scipy website: <a class="reference" href="http://www.scipy.org">http://www.scipy.org</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id11" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id3" name="id11">[3]</a></td><td>The matplotlib website:
<a class="reference" href="http://matplotlib.sourceforge.net">http://matplotlib.sourceforge.net</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id12" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id4" name="id12">[4]</a></td><td>The traits and traitsUI user guide:
<a class="reference" href="http://code.enthought.com/traits">http://code.enthought.com/traits</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id14" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id5" name="id14">[5]</a></td><td>ctypes: <a class="reference" href="http://starship.python.net/crew/theller/ctypes/">http://starship.python.net/crew/theller/ctypes/</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id15" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id6" name="id15">[6]</a></td><td>threading: <a class="reference" href="http://docs.python.org/lib/module-threading.html">http://docs.python.org/lib/module-threading.html</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id16" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id7" name="id16">[7]</a></td><td>chaco: <a class="reference" href="http://code.enthought.com/chaco/">http://code.enthought.com/chaco/</a></td></tr>
</tbody>
</table>
<!-- vim:spell:spelllang=en_us -->
</div>
</div>
</div>
</body>
</html>
